(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{lBUW:function(t,o,r){"use strict";r.r(o),r.d(o,"AuthModule",function(){return J});var e=r("ofXK"),s=r("tyNb"),i=r("jjWn"),n=r("fXoL");let a=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=n.Db({type:t,selectors:[["app-auth"]],decls:16,vars:0,consts:[[1,"auth-layout"],[1,"info-side"],[1,"info","text-center"],[1,"logo","mb-3"],["src","assets/images/logo.png",1,"img-fluid"],[1,"text-white","mb-5"],["type","button","routerLink","/",1,"btn","btn-primary","px-5"],[1,"fas","fa-home"],[1,"form-side"],[1,"form"]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"div",3),n.Kb(4,"img",4),n.Nb(),n.Ob(5,"div",5),n.Ob(6,"h6"),n.Hc(7,"Nice to see you again"),n.Nb(),n.Ob(8,"h2"),n.Hc(9," Welcome Back "),n.Nb(),n.Nb(),n.Ob(10,"button",6),n.Kb(11,"i",7),n.Hc(12," Back Home"),n.Nb(),n.Nb(),n.Nb(),n.Ob(13,"div",8),n.Ob(14,"div",9),n.Kb(15,"router-outlet"),n.Nb(),n.Nb(),n.Nb())},directives:[s.c,s.g],styles:[""]}),t})();var l=r("3Pt+"),d=r("v4IS");function c(t,o){return r=>{var e,s;if(r.parent&&o){const o=(null===(e=r.parent)||void 0===e?void 0:e.controls)[t];return o&&o.updateValueAndValidity(),null}return r.parent&&r.parent.value&&r.value===(null===(s=r.parent)||void 0===s?void 0:s.controls)[t].value?null:{matching:!0}}}var b=r("xa+l"),m=r("UKdJ");function h(t,o){if(1&t&&(n.Ob(0,"div",19),n.Hc(1),n.bc(2,"titlecase"),n.Nb()),2&t){const t=n.ac();n.xb(1),n.Jc(" ",n.cc(2,1,t.serverError)," ")}}let u=(()=>{class t{constructor(t,o,r,e){this.globals=t,this.auth=o,this.router=r,this.route=e,this.serverError="",this.formLoaded=!1,this.submitting=!1,this.resendCode=!1,this.changePasswordForm=new l.f({oldPassword:new l.d("",[l.t.required,l.t.minLength(6)]),newPassword:new l.d("",[l.t.required,l.t.minLength(8),c("confirmNewPassword",!0)]),confirmNewPassword:new l.d("",[l.t.required,l.t.minLength(8),c("newPassword")])})}ngOnInit(){this.user=d.a.currentAuthenticatedUser().then(t=>{this.user=t,console.log(this.user)}).catch(t=>console.log(t))}changePasswordFormSubmit(){this.changePasswordForm.valid?(this.serverError="",this.submitting=!0,d.a.changePassword(this.user,this.changePasswordForm.controls.oldPassword.value,this.changePasswordForm.controls.newPassword.value).then(t=>{console.log(t),this.submitting=!1,d.a.signOut(),localStorage.removeItem("mercury_event_uid"),this.router.navigate(["/auth/login"]).then(()=>{window.location.reload()})}).catch(t=>{this.serverError=t.message||JSON.stringify(t),this.submitting=!1})):this.changePasswordForm.markAllAsTouched()}isControlValid(t){const o=this.changePasswordForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.changePasswordForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const r=this.changePasswordForm.controls[o];return r.hasError(t)&&(r.dirty||r.touched)}isControlTouched(t){const o=this.changePasswordForm.controls[t];return o.dirty||o.touched}}return t.\u0275fac=function(o){return new(o||t)(n.Jb(b.a),n.Jb(m.a),n.Jb(s.b),n.Jb(s.a))},t.\u0275cmp=n.Db({type:t,selectors:[["app-change-password"]],decls:27,vars:18,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center","mb-5"],[1,"text-primary","fw-bold"],[1,"col-12"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","password","id","oldPassword","placeholder","Old Password","autocomplete","off","formControlName","oldPassword",1,"form-control"],["for","oldPassword"],["type","password","id","newPassword","placeholder","New Password","autocomplete","off","formControlName","newPassword",1,"form-control"],["for","newPassword"],["type","password","id","confirmNewPassword","placeholder","Confirm New Password","autocomplete","off","formControlName","confirmNewPassword",1,"form-control"],["for","confirmNewPassword"],[1,"form-group","text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5","mx-2"],[3,"hidden"],["role","status",1,"spinner-border","spinner-border-sm","text-light",3,"hidden"],[1,"visually-hidden"],[1,"alert","alert-danger","text-center"]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"h4",3),n.Hc(4,"Change Password"),n.Nb(),n.Nb(),n.Ob(5,"div",4),n.Fc(6,h,3,3,"div",5),n.Ob(7,"form",6),n.Yb("ngSubmit",function(){return o.changePasswordFormSubmit()}),n.Ob(8,"div",7),n.Kb(9,"input",8),n.Ob(10,"label",9),n.Hc(11,"Old Password"),n.Nb(),n.Nb(),n.Ob(12,"div",7),n.Kb(13,"input",10),n.Ob(14,"label",11),n.Hc(15,"New Password"),n.Nb(),n.Nb(),n.Ob(16,"div",7),n.Kb(17,"input",12),n.Ob(18,"label",13),n.Hc(19,"Confirm New Password"),n.Nb(),n.Nb(),n.Ob(20,"div",14),n.Ob(21,"button",15),n.Ob(22,"span",16),n.Hc(23,"Change Password"),n.Nb(),n.Ob(24,"div",17),n.Ob(25,"span",18),n.Hc(26,"Loading..."),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&t&&(n.xb(6),n.hc("ngIf",""!=o.serverError),n.xb(1),n.Bb("disabled",o.submitting),n.hc("formGroup",o.changePasswordForm),n.xb(2),n.Bb("is-invalid",o.isControlInvalid("oldPassword"))("is-valid",o.isControlValid("oldPassword")),n.xb(4),n.Bb("is-invalid",o.isControlInvalid("newPassword"))("is-valid",o.isControlValid("newPassword")),n.xb(4),n.Bb("is-invalid",o.isControlInvalid("confirmNewPassword"))("is-valid",o.isControlValid("confirmNewPassword")),n.xb(5),n.hc("hidden",o.submitting),n.xb(2),n.hc("hidden",!o.submitting))},directives:[e.m,l.v,l.m,l.g,l.b,l.l,l.e],pipes:[e.w],styles:[""]}),t})();var g=r("PSD3"),f=r.n(g);function p(t,o){if(1&t&&(n.Ob(0,"div",16),n.Hc(1),n.bc(2,"titlecase"),n.Nb()),2&t){const t=n.ac();n.xb(1),n.Jc(" ",n.cc(2,1,t.serverError)," ")}}let w=(()=>{class t{constructor(t,o,r,e){this.globals=t,this.auth=o,this.router=r,this.route=e,this.serverError="",this.formLoaded=!1,this.submitting=!1,this.resendCode=!1,this.confirmForm=new l.f({code:new l.d("",[l.t.required,l.t.minLength(6)])})}ngOnInit(){this.email=this.route.snapshot.queryParamMap.get("email"),console.log(this.email),this.email||this.router.navigate(["/auth"])}confirmFormSubmit(){this.confirmForm.valid?(this.submitting=!0,d.a.confirmSignUp(this.email,this.confirmForm.controls.code.value).then(t=>{console.log(t),this.submitting=!1,f.a.fire({icon:"success",title:"Thank you",text:"your account has been activated",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/auth/login"])})}).catch(t=>{console.log(t),console.log(t.message||JSON.stringify(t)),this.serverError=t.message,this.submitting=!1,this.resendCode=!0})):this.confirmForm.markAllAsTouched()}resendConfirmCode(){this.submitting=!0,this.serverError="",d.a.resendSignUp(this.email).then(t=>{console.log(t),f.a.fire({icon:"success",title:"Sent!",text:"your verification code has been sent, please check your email",showConfirmButton:!1,timer:3e3}),this.submitting=!1}).catch(t=>{console.log(t),console.log(t.message||JSON.stringify(t)),this.serverError=t.message,this.submitting=!1})}isControlValid(t){const o=this.confirmForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.confirmForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const r=this.confirmForm.controls[o];return r.hasError(t)&&(r.dirty||r.touched)}isControlTouched(t){const o=this.confirmForm.controls[t];return o.dirty||o.touched}}return t.\u0275fac=function(o){return new(o||t)(n.Jb(b.a),n.Jb(m.a),n.Jb(s.b),n.Jb(s.a))},t.\u0275cmp=n.Db({type:t,selectors:[["app-confirm"]],decls:22,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center","mb-5"],[1,"text-primary","fw-bold"],[1,"col-12"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","code","placeholder","Email","autocomplete","off","formControlName","code",1,"form-control"],["for","code"],[1,"form-group","text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5","mx-2"],[3,"hidden"],["role","status",1,"spinner-border","spinner-border-sm","text-light",3,"hidden"],[1,"visually-hidden"],["type","button",1,"btn","btn-link","btn-lg","px-5","mx-2",3,"hidden","click"],[1,"alert","alert-danger","text-center"]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"h4",3),n.Hc(4,"Confirm"),n.Nb(),n.Nb(),n.Ob(5,"div",4),n.Fc(6,p,3,3,"div",5),n.Ob(7,"form",6),n.Yb("ngSubmit",function(){return o.confirmFormSubmit()}),n.Ob(8,"div",7),n.Kb(9,"input",8),n.Ob(10,"label",9),n.Hc(11,"Confirm Code"),n.Nb(),n.Nb(),n.Ob(12,"div",10),n.Ob(13,"button",11),n.Ob(14,"span",12),n.Hc(15,"Confirm"),n.Nb(),n.Ob(16,"div",13),n.Ob(17,"span",14),n.Hc(18,"Loading..."),n.Nb(),n.Nb(),n.Nb(),n.Ob(19,"button",15),n.Yb("click",function(){return o.resendConfirmCode()}),n.Ob(20,"span"),n.Hc(21,"Resend Code"),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&t&&(n.xb(6),n.hc("ngIf",""!=o.serverError),n.xb(1),n.Bb("disabled",o.submitting),n.hc("formGroup",o.confirmForm),n.xb(2),n.Bb("is-invalid",o.isControlInvalid("code"))("is-valid",o.isControlValid("code")),n.xb(5),n.hc("hidden",o.submitting),n.xb(2),n.hc("hidden",!o.submitting),n.xb(3),n.hc("hidden",!o.resendCode))},directives:[e.m,l.v,l.m,l.g,l.b,l.l,l.e],pipes:[e.w],styles:[""]}),t})();function v(t,o){if(1&t&&(n.Ob(0,"div",17),n.Hc(1),n.bc(2,"titlecase"),n.Nb()),2&t){const t=n.ac();n.xb(1),n.Jc(" ",n.cc(2,1,t.serverError)," ")}}let N=(()=>{class t{constructor(t,o,r){this.globals=t,this.router=o,this.route=r,this.serverError="",this.formLoaded=!1,this.submitting=!1,this.forgetPasswordForm=new l.f({email:new l.d("",[l.t.required,l.t.email,l.t.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/)]),code:new l.d("",[l.t.required,l.t.minLength(6)]),password:new l.d("",[l.t.required,l.t.minLength(6)])})}ngOnInit(){this.globals.loggedIn&&this.router.navigate(["/"])}forgetPasswordFormSubmit(){if(this.forgetPasswordForm.valid){let t=this.forgetPasswordForm.controls.email.value,o=this.forgetPasswordForm.controls.code.value,r=this.forgetPasswordForm.controls.password.value;this.serverError="",this.submitting=!0,d.a.forgotPasswordSubmit(t,o,r).then(t=>{console.log(t),f.a.fire({icon:"success",title:"Thank you",text:"Your password has been changed successfuly",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/auth/login"])}),this.submitting=!1}).catch(t=>{console.log(t),this.serverError=t.message||JSON.stringify(t),this.submitting=!1})}else this.forgetPasswordForm.markAllAsTouched()}isControlValid(t){const o=this.forgetPasswordForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.forgetPasswordForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const r=this.forgetPasswordForm.controls[o];return r.hasError(t)&&(r.dirty||r.touched)}isControlTouched(t){const o=this.forgetPasswordForm.controls[t];return o.dirty||o.touched}}return t.\u0275fac=function(o){return new(o||t)(n.Jb(b.a),n.Jb(s.b),n.Jb(s.a))},t.\u0275cmp=n.Db({type:t,selectors:[["app-forget-password-confirm"]],decls:27,vars:18,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center","mb-5"],[1,"text-primary","fw-bold"],[1,"col-12"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","id","email","placeholder","Email","autocomplete","off","formControlName","email",1,"form-control"],["for","code"],["type","text","id","code","placeholder","code","autocomplete","off","formControlName","code",1,"form-control"],["type","password","id","password","placeholder","password","autocomplete","off","formControlName","password",1,"form-control"],[1,"form-group","text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5","mx-2"],[3,"hidden"],["role","status",1,"spinner-border","spinner-border-sm","text-light",3,"hidden"],[1,"visually-hidden"],[1,"alert","alert-danger","text-center"]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"h4",3),n.Hc(4,"Forget Password"),n.Nb(),n.Nb(),n.Ob(5,"div",4),n.Fc(6,v,3,3,"div",5),n.Ob(7,"form",6),n.Yb("ngSubmit",function(){return o.forgetPasswordFormSubmit()}),n.Ob(8,"div",7),n.Kb(9,"input",8),n.Ob(10,"label",9),n.Hc(11,"Email"),n.Nb(),n.Nb(),n.Ob(12,"div",7),n.Kb(13,"input",10),n.Ob(14,"label",9),n.Hc(15,"Verification Code"),n.Nb(),n.Nb(),n.Ob(16,"div",7),n.Kb(17,"input",11),n.Ob(18,"label",9),n.Hc(19,"Password"),n.Nb(),n.Nb(),n.Ob(20,"div",12),n.Ob(21,"button",13),n.Ob(22,"span",14),n.Hc(23,"Send"),n.Nb(),n.Ob(24,"div",15),n.Ob(25,"span",16),n.Hc(26,"Loading..."),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&t&&(n.xb(6),n.hc("ngIf",""!=o.serverError),n.xb(1),n.Bb("disabled",o.submitting),n.hc("formGroup",o.forgetPasswordForm),n.xb(2),n.Bb("is-invalid",o.isControlInvalid("email"))("is-valid",o.isControlValid("email")),n.xb(4),n.Bb("is-invalid",o.isControlInvalid("code"))("is-valid",o.isControlValid("code")),n.xb(4),n.Bb("is-invalid",o.isControlInvalid("password"))("is-valid",o.isControlValid("password")),n.xb(5),n.hc("hidden",o.submitting),n.xb(2),n.hc("hidden",!o.submitting))},directives:[e.m,l.v,l.m,l.g,l.b,l.l,l.e],pipes:[e.w],styles:[""]}),t})();function O(t,o){if(1&t&&(n.Ob(0,"div",16),n.Hc(1),n.bc(2,"titlecase"),n.Nb()),2&t){const t=n.ac();n.xb(1),n.Jc(" ",n.cc(2,1,t.serverError)," ")}}let y=(()=>{class t{constructor(t,o,r){this.globals=t,this.router=o,this.route=r,this.serverError="",this.formLoaded=!1,this.submitting=!1,this.forgetPasswordForm=new l.f({email:new l.d("",[l.t.required,l.t.email,l.t.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/)])})}ngOnInit(){this.globals.loggedIn&&this.router.navigate(["/"])}forgetPasswordFormSubmit(){this.forgetPasswordForm.valid?(this.serverError="",this.submitting=!0,d.a.forgotPassword(this.forgetPasswordForm.controls.email.value).then(t=>{console.log(t),f.a.fire({icon:"success",title:"Thank you",text:"Your verification code sent to your email",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/auth/forget-password-confirm"],{skipLocationChange:!0})}),this.submitting=!1}).catch(t=>{console.log(t),this.serverError=t.message||JSON.stringify(t),this.submitting=!1})):this.forgetPasswordForm.markAllAsTouched()}isControlValid(t){const o=this.forgetPasswordForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.forgetPasswordForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const r=this.forgetPasswordForm.controls[o];return r.hasError(t)&&(r.dirty||r.touched)}isControlTouched(t){const o=this.forgetPasswordForm.controls[t];return o.dirty||o.touched}}return t.\u0275fac=function(o){return new(o||t)(n.Jb(b.a),n.Jb(s.b),n.Jb(s.a))},t.\u0275cmp=n.Db({type:t,selectors:[["app-forget-password"]],decls:21,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center","mb-5"],[1,"text-primary","fw-bold"],[1,"text-grey"],[1,"col-md-12"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","id","email","placeholder","Email","autocomplete","off","formControlName","email",1,"form-control"],["for","code"],[1,"form-group","text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5","mx-2"],[3,"hidden"],["role","status",1,"spinner-border","spinner-border-sm","text-light",3,"hidden"],[1,"visually-hidden"],[1,"alert","alert-danger","text-center"]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"h4",3),n.Hc(4,"Forget Password"),n.Nb(),n.Ob(5,"p",4),n.Hc(6," Write your email to get reset code "),n.Nb(),n.Nb(),n.Ob(7,"div",5),n.Fc(8,O,3,3,"div",6),n.Ob(9,"form",7),n.Yb("ngSubmit",function(){return o.forgetPasswordFormSubmit()}),n.Ob(10,"div",8),n.Kb(11,"input",9),n.Ob(12,"label",10),n.Hc(13,"Email"),n.Nb(),n.Nb(),n.Ob(14,"div",11),n.Ob(15,"button",12),n.Ob(16,"span",13),n.Hc(17,"Send Code"),n.Nb(),n.Ob(18,"div",14),n.Ob(19,"span",15),n.Hc(20,"Loading..."),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&t&&(n.xb(8),n.hc("ngIf",""!=o.serverError),n.xb(1),n.Bb("disabled",o.submitting),n.hc("formGroup",o.forgetPasswordForm),n.xb(2),n.Bb("is-invalid",o.isControlInvalid("email"))("is-valid",o.isControlValid("email")),n.xb(5),n.hc("hidden",o.submitting),n.xb(2),n.hc("hidden",!o.submitting))},directives:[e.m,l.v,l.m,l.g,l.b,l.l,l.e],pipes:[e.w],styles:[""]}),t})();function P(t,o){if(1&t&&(n.Ob(0,"div",17),n.Hc(1),n.bc(2,"titlecase"),n.Nb()),2&t){const t=n.ac();n.xb(1),n.Jc(" ",n.cc(2,1,t.serverError)," ")}}let x=(()=>{class t{constructor(t,o,r,e){this.globals=t,this.auth=o,this.router=r,this.route=e,this.serverError="",this.formLoaded=!1,this.submitting=!1,this.resendCode=!1,this.changePasswordForm=new l.f({newPassword:new l.d("",[l.t.required,l.t.minLength(8),c("confirmPassword",!0)]),confirmPassword:new l.d("",[l.t.required,l.t.minLength(8),c("newPassword")])})}ngOnInit(){let t=this.route.snapshot.queryParamMap.get("userData");this.user=JSON.parse(t||""),console.log(this.user)}changePasswordFormSubmit(){this.changePasswordForm.valid?(this.submitting=!0,this.auth.congitoUser.subscribe(t=>{d.a.completeNewPassword(t,this.changePasswordForm.controls.newPassword.value,[]).then(t=>{console.log(t),this.submitting=!1,this.router.navigate(["/auth/login"])}).catch(t=>{this.serverError=t.message||JSON.stringify(t),this.submitting=!1})})):this.changePasswordForm.markAllAsTouched()}isControlValid(t){const o=this.changePasswordForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.changePasswordForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const r=this.changePasswordForm.controls[o];return r.hasError(t)&&(r.dirty||r.touched)}isControlTouched(t){const o=this.changePasswordForm.controls[t];return o.dirty||o.touched}}return t.\u0275fac=function(o){return new(o||t)(n.Jb(b.a),n.Jb(m.a),n.Jb(s.b),n.Jb(s.a))},t.\u0275cmp=n.Db({type:t,selectors:[["app-new-password"]],decls:23,vars:14,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center","mb-5"],[1,"text-primary","fw-bold"],[1,"col-12"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","password","id","newPassword","placeholder","Email","autocomplete","off","formControlName","newPassword",1,"form-control"],["for","newPassword"],["type","password","id","confirmPassword","placeholder","Email","autocomplete","off","formControlName","confirmPassword",1,"form-control"],["for","confirmPassword"],[1,"form-group","text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5","mx-2"],[3,"hidden"],["role","status",1,"spinner-border","spinner-border-sm","text-light",3,"hidden"],[1,"visually-hidden"],[1,"alert","alert-danger","text-center"]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"h4",3),n.Hc(4,"New Password"),n.Nb(),n.Nb(),n.Ob(5,"div",4),n.Fc(6,P,3,3,"div",5),n.Ob(7,"form",6),n.Yb("ngSubmit",function(){return o.changePasswordFormSubmit()}),n.Ob(8,"div",7),n.Kb(9,"input",8),n.Ob(10,"label",9),n.Hc(11,"New Password"),n.Nb(),n.Nb(),n.Ob(12,"div",7),n.Kb(13,"input",10),n.Ob(14,"label",11),n.Hc(15,"Confirm Password"),n.Nb(),n.Nb(),n.Ob(16,"div",12),n.Ob(17,"button",13),n.Ob(18,"span",14),n.Hc(19,"Change Password"),n.Nb(),n.Ob(20,"div",15),n.Ob(21,"span",16),n.Hc(22,"Loading..."),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&t&&(n.xb(6),n.hc("ngIf",""!=o.serverError),n.xb(1),n.Bb("disabled",o.submitting),n.hc("formGroup",o.changePasswordForm),n.xb(2),n.Bb("is-invalid",o.isControlInvalid("newPassword"))("is-valid",o.isControlValid("newPassword")),n.xb(4),n.Bb("is-invalid",o.isControlInvalid("confirmPassword"))("is-valid",o.isControlValid("confirmPassword")),n.xb(5),n.hc("hidden",o.submitting),n.xb(2),n.hc("hidden",!o.submitting))},directives:[e.m,l.v,l.m,l.g,l.b,l.l,l.e],pipes:[e.w],styles:[""]}),t})();function C(t,o){if(1&t&&(n.Ob(0,"div",21),n.Hc(1),n.bc(2,"titlecase"),n.Nb()),2&t){const t=n.ac();n.xb(1),n.Jc(" ",n.cc(2,1,t.serverError)," ")}}function F(t,o){1&t&&(n.Ob(0,"div",22),n.Ob(1,"div",23),n.Ob(2,"span",17),n.Hc(3,"Loading..."),n.Nb(),n.Nb(),n.Ob(4,"div",24),n.Hc(5,"Please Wait..."),n.Nb(),n.Nb())}let E=(()=>{class t{constructor(t,o,r){this.globals=t,this.auth=o,this.router=r,this.serverError="",this.formLoaded=!1,this.submitting=!1,this.loginLoader=!1,this.confirm=!1,this.loginForm=new l.f({email:new l.d(" ",[l.t.required,l.t.email,l.t.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/)]),password:new l.d("",[l.t.required,l.t.minLength(6),l.t.maxLength(24)])}),this.updatePassword=new l.f({password:new l.d("",[l.t.required,l.t.minLength(6),l.t.maxLength(24)])}),this.forceUpdatePassword=!1}ngOnInit(){console.log(this.globals.loggedIn),this.globals.loggedIn&&this.router.navigate(["/"])}amplifyLogin(){if(this.serverError="",this.loginForm.valid){let t=this.loginForm.controls.email.value,o=this.loginForm.controls.password.value;this.submitting=!0,d.a.signIn(t,o).then(t=>{if(console.log(t),this.auth.congitoUser.next(t),null==t?void 0:t.challengeName)"NEW_PASSWORD_REQUIRED"==(null==t?void 0:t.challengeName)&&this.router.navigate(["/auth/new-password"],{queryParams:{userData:JSON.stringify(t)},skipLocationChange:!0});else{this.globals.lastActivity=(new Date).getTime(),this.globals.userInfo=t,this.globals.loggedIn=!0;let o=this.auth.hashText("encrypt",JSON.stringify(this.globals.userInfo));this.globals.userInfo=JSON.parse(this.auth.hashText("",o)),localStorage.setItem("mercury_event_uid",o),this.submitting=!1,this.loginLoader=!0,window.location.reload()}}).catch(t=>{console.log(t),this.serverError=t.message||JSON.stringify(t),this.submitting=!1,"User is not confirmed."==t.message&&(this.confirm=!0)})}else this.loginForm.markAllAsTouched()}confirmUser(){this.router.navigate(["/auth/confirm"],{queryParams:{email:this.loginForm.controls.email.value},skipLocationChange:!0})}isControlValid(t){const o=this.loginForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.loginForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const r=this.loginForm.controls[o];return r.hasError(t)&&(r.dirty||r.touched)}isControlTouched(t){const o=this.loginForm.controls[t];return o.dirty||o.touched}}return t.\u0275fac=function(o){return new(o||t)(n.Jb(b.a),n.Jb(m.a),n.Jb(s.b))},t.\u0275cmp=n.Db({type:t,selectors:[["app-signin"]],decls:31,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center"],[1,"text-primary","fw-bold","mb-5"],[1,"col-12"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","id","floatingInput","placeholder","Email","autocomplete","off","formControlName","email",1,"form-control"],["for","floatingInput"],[1,"form-floating"],["type","password","id","floatingPassword","placeholder","Password","autocomplete","off","formControlName","password",1,"form-control"],["for","floatingPassword"],[1,"form-group","text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5","m-2"],[3,"hidden"],["role","status",1,"spinner-border","spinner-border-sm","text-light",3,"hidden"],[1,"visually-hidden"],["type","button",1,"btn","btn-outline-primary","btn-lg","m-2","px-5",3,"hidden","click"],["type","button","routerLink","/auth/forget-password",1,"btn","btn-link","px-5"],["class","page-loader",4,"ngIf"],[1,"alert","alert-danger","text-center"],[1,"page-loader"],["role","status",1,"spinner-border","text-primary","my-3"],[1,""]],template:function(t,o){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"h4",3),n.Hc(4,"Login Account"),n.Nb(),n.Nb(),n.Ob(5,"div",4),n.Fc(6,C,3,3,"div",5),n.Ob(7,"form",6),n.Yb("ngSubmit",function(){return o.amplifyLogin()}),n.Ob(8,"div",7),n.Kb(9,"input",8),n.Ob(10,"label",9),n.Hc(11,"Email"),n.Nb(),n.Nb(),n.Ob(12,"div",10),n.Kb(13,"input",11),n.Ob(14,"label",12),n.Hc(15,"Password"),n.Nb(),n.Nb(),n.Ob(16,"div",13),n.Ob(17,"button",14),n.Ob(18,"span",15),n.Hc(19,"Login"),n.Nb(),n.Ob(20,"div",16),n.Ob(21,"span",17),n.Hc(22,"Loading..."),n.Nb(),n.Nb(),n.Nb(),n.Ob(23,"button",18),n.Yb("click",function(){return o.confirmUser()}),n.Ob(24,"span"),n.Hc(25,"Confirm User"),n.Nb(),n.Nb(),n.Nb(),n.Ob(26,"div",13),n.Ob(27,"button",19),n.Ob(28,"span"),n.Hc(29,"Forget password?"),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Fc(30,F,6,0,"div",20)),2&t&&(n.xb(6),n.hc("ngIf",""!=o.serverError),n.xb(1),n.Bb("disabled",o.submitting),n.hc("formGroup",o.loginForm),n.xb(2),n.Bb("is-invalid",o.isControlInvalid("email"))("is-valid",o.isControlValid("email")),n.xb(4),n.Bb("is-invalid",o.isControlInvalid("password"))("is-valid",o.isControlValid("password")),n.xb(5),n.hc("hidden",o.submitting),n.xb(2),n.hc("hidden",!o.submitting),n.xb(3),n.hc("hidden",!o.confirm),n.xb(7),n.hc("ngIf",o.loginLoader))},directives:[e.m,l.v,l.m,l.g,l.b,l.l,l.e,s.c],pipes:[e.w],styles:[""]}),t})();const H=[{path:"",component:a,children:[{path:"",redirectTo:"login",component:E},{path:"login",component:E},{path:"confirm",component:w},{path:"change-password",component:u,canActivate:[i.a]},{path:"new-password",component:x},{path:"forget-password",component:y},{path:"forget-password-confirm",component:N}]}];let I=(()=>{class t{constructor(){}}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(o){return new(o||t)},imports:[[s.f.forChild(H)],s.f]}),t})();var S=r("MfXf");let J=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(o){return new(o||t)},providers:[],imports:[[e.c,I,S.a]]}),t})()}}]);