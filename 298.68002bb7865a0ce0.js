"use strict";(self.webpackChunkteachersPension=self.webpackChunkteachersPension||[]).push([[298],{9298:(p,a,s)=>{s.r(a),s.d(a,{AuthModule:()=>w});var u=s(6814),c=s(2384),t=s(5879);let h=(()=>{class o{ngAfterViewInit(){document.querySelector(".page-loader")?.classList.add("d-none")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth"]],decls:8,vars:0,consts:[[1,"auth-layout"],[1,"container-fluid"],[1,"row","divide-page-center"],[1,"col-12","img-bg"],[1,"form-container"],[1,"text-center"],["src","assets/images/logo.png","width","148px",1,"img-fluid","mb-3"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"img",6),t.qZA(),t._UZ(7,"router-outlet"),t.qZA()()()()())},dependencies:[c.lC],encapsulation:2}),o})();var r=s(6223),m=s(8645),d=s(9773),f=s(1674),g=s(9862),v=s(553);let b=(()=>{class o{constructor(e){this.http=e}login(e){return this.http.post(`${v.N.apiBaseUrl}api/auth/login`,e,{headers:(new g.WM).set("Content-Type","application/json")})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=s(3999);function C(o,i){if(1&o&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors," ")}}function Z(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Labels.Signin")))}function y(o,i){1&o&&t._UZ(0,"span",15)}const S=[{path:"",component:h,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class o{constructor(e,n,l){this.router=e,this.gs=n,this.as=l,this.loading=!1,this.unsubscribe$=new m.x,this.errors="",this.loginForm=new r.cw({username:new r.NI("",[r.kI.required,r.kI.minLength(4)]),password:new r.NI("",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(24)])}),this.getGlobals()}ngOnInit(){}getGlobals(){this.gs.getGlobals().pipe((0,d.R)(this.unsubscribe$)).subscribe(e=>{this.gs.globals=e,console.log(this.gs.globals),this.gs.globals.loggedIn&&this.router.navigate(["/"])})}onSubmit(){this.loginForm.valid?(this.loading=!0,this.errors="",this.as.login({username:this.loginForm.controls.username.value,password:this.loginForm.controls.password.value}).pipe((0,d.R)(this.unsubscribe$)).subscribe(n=>{if(console.log(n),n.success){this.gs.globals.loggedIn=!0,this.gs.globals.userInfo=n?.data;let l=btoa(JSON.stringify(this.gs.globals));localStorage.setItem("tpd",l),this.gs.setGlobals(this.gs.globals),this.loading=!1}else this.errors=n?.errors,this.gs.globals.loggedIn=!1,this.loading=!1})):this.loginForm.markAllAsTouched()}get f(){return this.loginForm.controls}isControlValid(e){const n=this.f[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e){const n=this.f[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,n){const l=this.f[n];return l.hasError(e)&&(l.dirty||l.touched)}isControlTouched(e){const n=this.f[e];return n.dirty||n.touched}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.F0),t.Y36(f.U),t.Y36(b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-signin"]],decls:22,vars:26,consts:[[1,"container"],[1,"row"],[1,"col-12"],["autocomplete","off",1,"auth-form","row",3,"formGroup","ngSubmit"],["class","alert alert-danger text-center",4,"ngIf"],[1,"form-group","mb-3","col-12"],["for","",1,"fw-bold"],["type","text","autocomplete","off","formControlName","username",1,"form-control",3,"placeholder"],[1,"form-group","mb-5","col-12"],["type","password","autocomplete","new-password","formControlName","password",1,"form-control",3,"placeholder"],[1,"form-group","col-12"],["type","submit",1,"btn","btn-primary","w-100"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"alert","alert-danger","text-center"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(4,"div",2),t.YNc(5,C,2,1,"div",4),t.qZA(),t.TgZ(6,"div",5)(7,"label",6),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",7),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",8)(13,"label",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",9),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",10)(19,"button",11),t.YNc(20,Z,3,3,"span",12),t.YNc(21,y,1,0,"span",13),t.qZA()()()()()()),2&e&&(t.xp6(2),t.ekj("disabled",n.loading),t.xp6(1),t.Q6J("formGroup",n.loginForm),t.xp6(2),t.Q6J("ngIf",""!=n.errors),t.xp6(3),t.Oqu(t.lcZ(9,18,"Labels.Username")),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid("username"))("is-valid",n.isControlValid("username")),t.s9C("placeholder",t.lcZ(11,20,"Labels.Username")),t.xp6(4),t.Oqu(t.lcZ(15,22,"Labels.Password")),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid("password"))("is-valid",n.isControlValid("password")),t.s9C("placeholder",t.lcZ(17,24,"Labels.Username")),t.xp6(4),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading))},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,A.X$]}),o})()}]}];let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.Bz.forChild(S),c.Bz]}),o})();var T=s(6208);let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,I,T.m]}),o})()},553:(p,a,s)=>{s.d(a,{N:()=>u});const u={production:!1,staging:!1,dev:!0,appVersion:"vbeta 0.1",hashKey:"teacher-pension",apiBaseUrl:"http://3.131.229.146:7777/",imgBaseUrl:"",dtLanguage:{search:"",searchPlaceholder:"\u062a\u0646\u0642\u064a\u0629",lengthMenu:"\u0639\u0631\u0636 _MENU_ \u0639\u0646\u0627\u0635\u0631 \u0644\u0643\u0644 \u0635\u0641\u062d\u0629",zeroRecords:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0627 \u0646\u062a\u0627\u0626\u062c",info:"\u0639\u0631\u0636 _START_ \u0627\u0644\u0649 _END_ \u0645\u0646 _TOTAL_",infoEmpty:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0627 \u0646\u062a\u0627\u0626\u062c",infoFiltered:"( \u062a\u0646\u0642\u064a\u0629 \u0645\u0646 _MAX_ )",paginate:{first:"\u0627\u0644\u0627\u0648\u0644",last:"\u0627\u0644\u0627\u062e\u064a\u0631",next:"\u0627\u0644\u0642\u0627\u062f\u0645",previous:"\u0627\u0644\u0633\u0627\u0628\u0642"}}}}}]);