"use strict";(self.webpackChunkems_ng16=self.webpackChunkems_ng16||[]).push([[276],{6276:(Ze,A,p)=>{p.r(A),p.d(A,{EventsModule:()=>Ce});var u=p(6814),x=p(2384),t=p(5879),h=p(2760),Z=p(6832);function D(o,s){1&o&&t._UZ(0,"router-outlet")}function N(o,s){1&o&&t._UZ(0,"app-access-denied")}let q=(()=>{class o{constructor(e){this.gs=e}ngOnInit(){this.updateBreadcrumb(),this.getActions()}updateBreadcrumb(){this.gs.globals.breadcrumb=[{name:"dashboard",url:"/"},{name:"Events",url:"/events"}],this.gs.setGlobals(this.gs.globals)}getActions(){this.gs.globals.actions.canView=this.gs.userCanAction("events",0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-events"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,n){1&e&&(t.YNc(0,D,1,0,"router-outlet",0),t.YNc(1,N,1,0,"app-access-denied",0)),2&e&&(t.Q6J("ngIf",n.gs.globals.actions.canView),t.xp6(1),t.Q6J("ngIf",!n.gs.globals.actions.canView))},dependencies:[u.O5,x.lC,Z.A]}),o})();var T=p(627),_=p(8645),f=p(9773),c=p(553),J=p(3519),b=p.n(J),C=p(775),E=p(3999),g=p(2030);function M(o,s){1&o&&(t.TgZ(0,"div",12),t._UZ(1,"div",13),t.qZA())}function V(o,s){1&o&&(t.TgZ(0,"a",14),t._UZ(1,"i",15),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Modules.Events.AddEvent")," "))}function O(o,s){1&o&&(t.TgZ(0,"a",24),t.ALo(1,"translate"),t._UZ(2,"i",25),t.qZA()),2&o&&t.s9C("ngbTooltip",t.lcZ(1,1,"Labels.Edit"))}function Y(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.deleteEvent(i))}),t.ALo(1,"translate"),t._UZ(2,"i",27),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.ekj("d-none",e.id==(null==n.gs.globals.userInfo||null==n.gs.globals.userInfo.currentEvent?null:n.gs.globals.userInfo.currentEvent.id)),t.s9C("ngbTooltip",t.lcZ(1,3,"Labels.Delete"))}}function Q(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",16),t._uU(2),t.ALo(3,"uppercase"),t.qZA(),t.TgZ(4,"td",17),t._UZ(5,"i",18),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",19),t._UZ(9,"i",20),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",21),t.YNc(13,O,3,3,"a",22),t.YNc(14,Y,3,5,"a",23),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,e.name)),t.xp6(4),t.hij(" ",t.xi3(7,7,null==e?null:e.startDate,"short"),""),t.xp6(4),t.hij(" ",t.xi3(11,10,null==e?null:e.endDate,"short")," "),t.xp6(3),t.Q6J("ngIf",n.gs.globals.actions.canEdit),t.xp6(1),t.Q6J("ngIf",n.gs.globals.actions.canDelete)}}function $(o,s){1&o&&t._UZ(0,"app-access-denied")}let B=(()=>{class o{constructor(e,n,i){this.gs=e,this.es=n,this.trans=i,this.isLoading=!0,this.unsubscribe$=new _.x,this.errors="",this.eventsList=[],this.dtOptions={},this.dtTrigger=new _.x}ngOnInit(){this.getActions(),this.updateBreadcrumb(),this.getEvents(),this.dtOptions={pagingType:"simple_numbers",pageLength:12,responsive:!0,language:c.N.dtLanguage,dom:"frtip",order:[[1,"desc"]]}}updateBreadcrumb(){this.gs.globals.breadcrumb=[{name:"dashboard",url:"/"},{name:"Events",url:"/events"},{name:"list",url:"/events"}],this.gs.setGlobals(this.gs.globals)}getActions(){this.gs.globals.actions.canView=this.gs.userCanAction("events",0),this.gs.globals.actions.canAdd=this.gs.userCanAction("events",1),this.gs.globals.actions.canEdit=this.gs.userCanAction("events",2),this.gs.globals.actions.canDelete=this.gs.userCanAction("events",3)}ngAfterViewInit(){this.dtTrigger.next()}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}getEvents(){let e=this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"];this.es.getOrganizationEvents(e).pipe((0,f.R)(this.unsubscribe$)).subscribe({next:n=>{console.log(n),this.eventsList=n.data,this.gs.globals.userInfo.userEvents=this.eventsList,this.gs.setGlobals(this.gs.globals),this.gs.updateLocalStorage(this.gs.globals),this.isLoading=!1,this.rerender()},error:n=>{console.log(n)}})}deleteEvent(e){b().fire({title:this.trans.instant("Messages.Sure?"),text:this.trans.instant("Messages.CntRvrt"),html:`${this.trans.instant("Labels.Delete")} "<b>${e?.name}</b>", ${this.trans.instant("Messages.CntRvrt")}`,icon:"warning",showCancelButton:!0,cancelButtonText:this.trans.instant("Labels.Cancel"),confirmButtonText:this.trans.instant("Labels.Delete")}).then(n=>{if(n.isConfirmed){this.isLoading=!0;let i=this.gs.globals.userInfo?.idToken?.payload["custom:utenantid"];this.es.deleteEvent(e.id,i).pipe((0,f.R)(this.unsubscribe$)).subscribe({next:r=>{console.log(r),this.isLoading=!1,this.getEvents(),r.success&&b().fire({icon:"success",text:`${r?.message}`,showConfirmButton:!1,timer:1500})}})}})}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(C.n),t.Y36(E.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-events-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(T.G,5),2&e){let i;t.iGM(i=t.CRH())&&(n.dtElement=i.first)}},decls:26,vars:24,consts:[["class","progress mb-3",4,"ngIf"],[1,"page-title"],[1,"text"],[1,"actions"],["class","btn btn-primary btn-sm","routerLink","/events/add",4,"ngIf"],[1,""],[1,"table-responsive","py-2"],["datatable","",1,"table","table-hover","table-sm","table-striped",3,"dtOptions","dtTrigger"],["scope","row"],[1,"text-end","no-sort"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"progress","mb-3"],["role","progressbar","aria-label","Animated striped example","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","100%"],["routerLink","/events/add",1,"btn","btn-primary","btn-sm"],[1,"fa-solid","fa-plus"],[1,"fw-bold"],[1,"text-success"],[1,"fa-solid","fa-calendar-check"],[1,"text-danger"],[1,"fa-solid","fa-calendar-xmark"],[1,"minw-150","text-end"],["class","btn btn-secondary btn-icon","routerLink","/events",3,"ngbTooltip",4,"ngIf"],["class","btn btn-danger btn-icon",3,"d-none","ngbTooltip","click",4,"ngIf"],["routerLink","/events",1,"btn","btn-secondary","btn-icon",3,"ngbTooltip"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","btn-danger","btn-icon",3,"ngbTooltip","click"],[1,"fa-regular","fa-trash-can"]],template:function(e,n){1&e&&(t.YNc(0,M,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,V,4,3,"a",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",9),t._uU(22,"Actions"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,Q,15,13,"tr",10),t.qZA()()()(),t.YNc(25,$,1,0,"app-access-denied",11)),2&e&&(t.Q6J("ngIf",n.isLoading),t.xp6(1),t.ekj("disabled",n.isLoading),t.xp6(2),t.hij(" ",t.lcZ(4,16,"Modules.Events.Title")," "),t.xp6(3),t.Q6J("ngIf",n.gs.globals.actions.canAdd),t.xp6(1),t.ekj("loading-data",n.isLoading)("disabled",n.isLoading),t.xp6(2),t.Q6J("dtOptions",n.dtOptions)("dtTrigger",n.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(14,18,"Labels.Name")),t.xp6(3),t.Oqu(t.lcZ(17,20,"Labels.StartDate")),t.xp6(3),t.Oqu(t.lcZ(20,22,"Labels.EndDate")),t.xp6(5),t.Q6J("ngForOf",n.eventsList),t.xp6(1),t.Q6J("ngIf",!n.gs.globals.actions.canView))},dependencies:[u.sg,u.O5,x.rH,Z.A,g._L,T.G,u.gd,u.uU,E.X$]}),o})();var U=p(6593),d=p(9862),m=p(6306),S=p(8504);let F=(()=>{class o{constructor(e,n){this.gs=e,this.http=n}getUsersByTenantID(e){return"exhibitor"==this.gs.globals?.userInfo?.idToken?.payload["custom:utype"].toLowerCase()?this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+this.gs.globals.userInfo.currentEvent.id+"/exhibitor/"+e+"/user",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError)):this.http.get(c.N.apiBaseUrl+"user/admin/v1/"+this.gs.globals?.userInfo?.idToken?.payload["custom:utype"].toLowerCase()+"/"+e+"/user",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getUserAttachment(e,n){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/visitor/"+n+"/attachments",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getUsersByExhibitorId(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+this.gs.globals.userInfo.currentEvent.id+"/exhibitor/"+e+"/user",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getUserById(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/user/"+e,{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getVisitorsByEventId(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/visitor",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getSpeakersByEventId(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/speaker",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getSessionSpeakersByEventId(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/speaker-users",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getModeratorsByEventId(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/moderator",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getPanelistByEventId(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/panelist",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}updateUserByID(e,n){return this.http.put(c.N.apiBaseUrl+"user/admin/v1/user/"+n,e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}resendOPT(e){return this.http.get(c.N.apiBaseUrl+"user/admin/v1/user/"+e+"/resend-otp",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}addOrganizationUser(e){return this.http.post(c.N.apiBaseUrl+"user/admin/v1/organization/"+this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]+"/user",e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}addExhibitorUser(e){return this.http.post(c.N.apiBaseUrl+"user/admin/v1/event/"+this.gs.globals.userInfo.currentEvent.id+"/exhibitor/"+e.exhibitorId+"/user",e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}createEventUser(e){return this.http.post(c.N.apiBaseUrl+"user/admin/v1/event/"+e.eventId+"/"+e.role.toLowerCase(),e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}printBadge(e,n){return this.http.put(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/visitor/"+n+"/print-badge","",{headers:new d.WM}).pipe((0,m.K)(this.handleError))}deleteUser(e){return this.http.delete(c.N.apiBaseUrl+"user/admin/v1/user/"+e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}bulkDeleteUser(e,n){return this.http.delete(c.N.apiBaseUrl+`user/admin/v1/category/${n}/users`,{headers:new d.WM,body:e}).pipe((0,m.K)(this.handleError))}bulkApproveUser(e){return this.http.put(c.N.apiBaseUrl+"user/admin/v1/users/approve",e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}bulkDeclineUser(e){return this.http.put(c.N.apiBaseUrl+"user/admin/v1/users/decline",e,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}bulkCreateVisitor(e,n){return this.http.post(c.N.apiBaseUrl+"user/admin/v1/event/"+e+"/visitors/csv",n,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}bulkCreateEventUsers(e,n,i){return this.http.post(c.N.apiBaseUrl+"user/admin/v1/event/"+e+`/${i}/csv`,n,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}bulkCreateExhibitorUsers(e,n,i){return this.http.post(c.N.apiBaseUrl+"user/admin/v1/event/"+e+`/exhibitor/${n}/exhibitors/csv`,i,{headers:new d.WM}).pipe((0,m.K)(this.handleError))}getEventByTenantId(){return this.http.get(c.N.apiBaseUrl+"events/admin/v1/organization/"+this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]+"/event",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}getExhibitorByEventId(e){return this.http.get(c.N.apiBaseUrl+"exhibitor/admin/v1/event/"+e+"/exhibitor",{headers:(new d.WM).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,m.K)(this.handleError))}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),(0,S._)(()=>"Something bad happened; please try again later.")}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.U),t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var a=p(6223);const y=[{label:"is Active",name:"isactive",type:"toggle",value:"",fullWidth:!1,validators:{},mandatory:!1},{label:"is Deleted",name:"isdeleted",type:"toggle",value:"",fullWidth:!1,validators:{},mandatory:!1},{label:"Role",name:"role",type:"hidden",value:"",fullWidth:!0,validators:{},mandatory:!1}];var k=p(5643),L=p(2425),j=p(327);function G(o,s){1&o&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.qZA())}function R(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.formInfo.mode="edit")}),t._uU(2,"Edit Visitor"),t.qZA()()}if(2&o){const e=t.oxw();t.ekj("disabled",e.isLoading)}}function H(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t._UZ(4,"input",16),t.ALo(5,"titlecase"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,9,e.label)),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid(e.name))("readonly","view"==n.formInfo.formMode),t.Q6J("placeholder",t.lcZ(5,11,e.label))("type",e.type)("formControlName",e.name)("value",e.value)}}function K(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t._UZ(4,"div",17),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e.label)),t.xp6(2),t.Q6J("innerHTML",e.value,t.oJD)}}function W(o,s){if(1&o&&(t.TgZ(0,"div",18)(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t._UZ(4,"div",17),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e.label)),t.xp6(2),t.Q6J("innerHTML",e.value,t.oJD)}}function P(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t._UZ(4,"input",19),t.ALo(5,"titlecase"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,9,e.label)),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid(e.name))("readonly","view"==n.formInfo.formMode||"edit"==n.formInfo.formMode),t.Q6J("placeholder",t.lcZ(5,11,e.label))("type",e.type)("formControlName",e.name)("value",e.value)}}function z(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t._UZ(4,"angular-intl-phone",20),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,e.label)),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid(e.name)),t.Q6J("formControlName",e.name)("config",n.config)}}function X(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t._UZ(4,"textarea",21),t.ALo(5,"titlecase"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,8,e.label)),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid(e.name))("readonly","view"==n.formInfo.formMode),t.Q6J("placeholder",t.lcZ(5,10,e.label))("formControlName",e.name)("value",e.value)}}function tt(o,s){if(1&o&&(t.TgZ(0,"div",24),t._UZ(1,"input",25),t.TgZ(2,"label",26),t._uU(3),t.qZA()()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2).$implicit,r=t.oxw(2);t.xp6(1),t.ekj("is-invalid",r.isControlInvalid(i.name))("disabled","view"==r.formInfo.formMode),t.hYB("id","",i.name,"-",n,""),t.Q6J("formControlName",i.name)("name",i.name)("value",e.value),t.xp6(1),t.hYB("for","",i.name,"-",n,""),t.xp6(1),t.Oqu(e.name)}}function et(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",22),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.YNc(4,tt,4,12,"div",23),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e.label)),t.xp6(2),t.Q6J("ngForOf",null==e?null:e.choices)}}function nt(o,s){if(1&o&&(t.TgZ(0,"option",30),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij("",t.lcZ(2,2,e.name)," ")}}function ot(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"select",27),t._UZ(5,"option",28),t.YNc(6,nt,3,4,"option",29),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,8,e.label)),t.xp6(2),t.ekj("is-invalid",n.isControlInvalid(e.name))("readonly","view"==n.formInfo.formMode),t.Q6J("formControlName",e.name)("value",e.value),t.xp6(2),t.Q6J("ngForOf",null==e?null:e.options)}}function it(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"input",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2).$implicit,v=t.oxw(2);return v.updateCheckArray(l.name,r.value),t.KtG(v.validateAllCheckboxGroup())}),t.qZA(),t.TgZ(2,"label",26),t._uU(3),t.ALo(4,"titlecase"),t.qZA()()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(2).$implicit;t.xp6(1),t.hYB("id","choice-",i.name,"-",n,""),t.Q6J("formControlName",i.name)("value",e.value)("name",i.name),t.xp6(1),t.hYB("for","choice-",i.name,"-",n,""),t.xp6(1),t.Oqu(t.lcZ(4,8,null==e?null:e.name))}}const st=function(o){return{"border border-danger p-2 rounded":o}};function rt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div",31),t.YNc(5,it,5,10,"div",32),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);let i;t.xp6(2),t.Oqu(t.lcZ(3,5,e.label)),t.xp6(2),t.ekj("disabled","view"==n.formInfo.formMode),t.Q6J("ngClass",t.VKq(7,st,!(null!=(i=n.myForm.get(e.name))&&i.valid)&&(null==(i=n.myForm.get(e.name))?null:i.touched))),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.choices)}}function at(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",33),t._UZ(2,"input",35),t.TgZ(3,"label",36),t._uU(4),t.ALo(5,"titlecase"),t.qZA()()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.ekj("disabled","view"==n.formInfo.formMode),t.xp6(1),t.ekj("is-invalid",n.isControlInvalid(e.name)),t.s9C("id",e.name),t.Q6J("formControlName",e.name)("name",e.name),t.xp6(1),t.s9C("for",e.name),t.xp6(1),t.Oqu(t.lcZ(5,9,e.label))}}function lt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div",37),t._UZ(5,"input",38)(6,"label",39),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,7,e.label)),t.xp6(2),t.ekj("disabled","view"==n.formInfo.formMode),t.xp6(1),t.ekj("is-invalid",n.isControlInvalid(e.name)),t.Q6J("formControlName",e.name)("value",e.value)}}function ct(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"label",15),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div",40),t._UZ(5,"input",41,42),t.TgZ(7,"button",43),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(6);return t.KtG(i.toggle())}),t._UZ(8,"i",44),t.qZA()()()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,6,e.label)),t.xp6(3),t.ekj("is-invalid",n.isControlInvalid(e.name)),t.Q6J("formControlName",e.name),t.xp6(2),t.ekj("btn-danger",n.isControlInvalid(e.name))}}const dt=function(){return["text","password","number","search","tel","url"]},pt=function(){return["readonly"]},ut=function(){return["hidden"]},mt=function(){return["email"]};function gt(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"div",12),t.YNc(2,H,6,13,"div",13),t.YNc(3,K,5,4,"div",13),t.YNc(4,W,5,4,"div",14),t.YNc(5,P,6,13,"div",13),t.YNc(6,z,5,7,"div",13),t.YNc(7,X,6,12,"div",13),t.YNc(8,et,5,4,"div",13),t.YNc(9,ot,7,10,"div",13),t.YNc(10,rt,6,9,"div",13),t.YNc(11,at,6,11,"div",13),t.YNc(12,lt,7,9,"div",13),t.YNc(13,ct,9,8,"div",13),t.qZA()()),2&o){const e=s.$implicit;t.ekj("col-md-12",null==e?null:e.fullWidth),t.xp6(2),t.Q6J("ngIf",t.DdM(14,dt).includes(e.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(15,pt).includes(e.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(16,ut).includes(e.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(17,mt).includes(e.type)),t.xp6(1),t.Q6J("ngIf","phone"===e.type),t.xp6(1),t.Q6J("ngIf","textarea"===e.type),t.xp6(1),t.Q6J("ngIf","radio"===e.type),t.xp6(1),t.Q6J("ngIf","select"===e.type),t.xp6(1),t.Q6J("ngIf","checkboxgroup"===e.type),t.xp6(1),t.Q6J("ngIf","checkbox"===e.type),t.xp6(1),t.Q6J("ngIf","toggle"===e.type),t.xp6(1),t.Q6J("ngIf","date"===e.type)}}function vt(o,s){1&o&&(t.TgZ(0,"div",45)(1,"button",46),t._uU(2," Reset "),t.qZA(),t.TgZ(3,"button",47),t._uU(4," Submit "),t.qZA()())}function ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",7),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())})("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.validateAllCheckboxGroup())}),t.TgZ(1,"div",8),t.YNc(2,gt,14,18,"div",9),t.YNc(3,vt,5,0,"div",10),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.myForm),t.xp6(1),t.ekj("disabled",e.isLoading)("disabled","view"==e.formInfo.mode),t.xp6(1),t.Q6J("ngForOf",null==e.jsonFormData?null:e.jsonFormData.controls),t.xp6(1),t.Q6J("ngIf","edit"==e.formInfo.mode)}}let ht=(()=>{class o{constructor(e,n,i,r,l){this.gs=e,this.us=n,this.fs=i,this.fb=r,this.toastr=l,this.visitorChanged=new t.vpe,this.isLoading=!0,this.unsubscribe$=new _.x,this.formLoaded=!1,this.submitting=!1,this.serverError="",this.config={placeholder:"Mobile/Phone",options:{initialCountry:"eg",onlyCountries:["eg"],allowDropdown:!1,separateDialCode:!1,hiddenInput:"full_phone",formatOnDisplay:!1}},this.formValues=[],this.myForm=this.fb.group({})}ngOnInit(){console.log(this.formInfo),this.formInfo?.formId&&this.getForm()}getForm(){this.fs.getFormById(this.formInfo.formId).pipe((0,f.R)(this.unsubscribe$)).subscribe({next:e=>{console.log(e),this.jsonFormData=this.addAdminControls(JSON.parse(e?.data.json)),console.log(this.jsonFormData),this.createForm(this.jsonFormData.controls),this.getVisitor()},error:e=>{console.log(e)}})}addAdminControls(e){return console.log(e),y[0].value="",y[2].value="",e.controls.push(y[0]),e.controls.push(y[2]),console.log(e),e}getVisitor(){this.us.getUserById(this.formInfo.visitorId).pipe((0,f.R)(this.unsubscribe$)).subscribe({next:e=>{console.log(e),this.visitorData=e.data,this.initVisitorData()},error:e=>{console.log(e)}})}createForm(e){this.formLoaded=!1,this.formValues=[];for(const n of e){const i=[];let r={label:n.label,name:n.name,value:n.value||[],type:n.type,valid:!1,validators:n.validators,options:n?.options,choices:n?.choices,fullWidth:n?.fullWidth||!1,isRange:n?.isRange||!1};if("attachment"!=r.type){this.formValues.push(r);for(const[l,v]of Object.entries(n.validators))switch(l){case"min":i.push(a.kI.min(v));break;case"max":i.push(a.kI.max(v));break;case"required":v&&i.push(a.kI.required);break;case"requiredTrue":v&&i.push(a.kI.requiredTrue);break;case"email":if(v){let Ie=new RegExp(/^([a-z\d\.-]+)@([a-z\d-]+)\.([a-z]{2,8})(\.[a-z]{2,8})?$/);i.push(a.kI.minLength(4)),i.push(a.kI.pattern(Ie))}break;case"minLength":i.push(a.kI.minLength(v));break;case"maxLength":i.push(a.kI.maxLength(v));break;case"pattern":let w=new RegExp(v.replaceAll(" ","\\"));i.push(a.kI.pattern(w));break;case"nullValidator":v&&i.push(a.kI.nullValidator)}this.myForm.addControl(n.name,this.fb.control(n.value,i))}this.myForm.reset()}this.formLoaded=!0}initVisitorData(){if(console.log(this.visitorData),console.log(this.visitorData.payload),"string"==this.visitorData.payload||""==this.visitorData.payload||null==this.visitorData.payload)this.myForm.get("isactive")?.setValue(this.visitorData.isActive),this.myForm.get("isdeleted")?.setValue(this.visitorData.isDeleted),this.myForm.get("role")?.setValue(this.visitorData.role),this.myForm.get("firstname")?.setValue(this.visitorData.firstName||this.visitorData.firstname),this.myForm.get("lastname")?.setValue(this.visitorData.lastName),this.myForm.get("email")?.setValue(this.visitorData.email),this.myForm.get("phone")?.setValue(this.visitorData.phone),this.myForm.get("company")?.setValue(this.visitorData.company),this.myForm.get("jobtitle")?.setValue(this.visitorData.jobTitle),this.toastr.error("Account created with wrong payload","",{}),this.toastr.info("Values updated from base object");else{let e;console.log(JSON.parse(this.visitorData.payload)),this.visitorData.payload&&(e=this.parsePayload(this.visitorData.payload),e.forEach(n=>{console.log(n),console.log(Array.isArray(n[1])),Array.isArray(n[1])?this.setCheckboxGroupValue(n[0],n[1]):this.myForm.get(n[0].toLowerCase())?.setValue(n[1])})),this.myForm.get("isactive")?.setValue(this.visitorData.isActive),this.myForm.get("isdeleted")?.setValue(this.visitorData.isDeleted),this.myForm.get("role")?.setValue(this.visitorData.role)}this.isLoading=!1,console.log("init form",this.myForm.value)}parsePayload(e){let n=JSON.parse(e);return n=Object.entries(n),n}setCheckboxGroupValue(e,n){console.log(this.formValues),this.myForm.controls[e]?.setValue(n),setTimeout(()=>{let i=document.querySelectorAll(`input[name='${e}']`);console.log(i),i.forEach(r=>{r.checked=!1}),i.forEach(r=>{n.includes(r.value)&&(r.checked=!0)}),this.formValues.filter(r=>{r.name==e&&(r.value=n)})})}onSubmit(){console.log("Form: ",this.myForm),console.log("FormValues Obj: ",this.formValues),this.myForm.valid?(this.updateFormValues(),this.validateAllCheckboxGroup(),this.submitForm(),this.isLoading=!0):this.myForm.markAllAsTouched()}submitForm(){this.formLoaded=!1,console.log(this.createSubmitData()),this.us.updateUserByID(this.createSubmitData(),this.visitorData.id).subscribe(e=>{console.log(e),this.serverError="",this.formLoaded=!0,this.myForm.reset(),b().fire({icon:"success",text:"Your work has been saved",showConfirmButton:!1,timer:2e3}),this.visitorChanged.emit(!0)},e=>{console.log(e),this.formLoaded=!0})}createSubmitData(){const e=this.formValues,n={};return e.push({name:"eventId",value:this.gs.globals.userInfo.currentEvent.id}),e.push({name:"urlQueryString",value:window.location.href}),e.push({name:"createDate",value:this.visitorData.createDate}),e.forEach((i,r)=>{n[i.name]=i.value}),console.log(e),console.log(n),n.payload=JSON.stringify(n),n}updateFormValues(){this.jsonFormData.controls.forEach(e=>{"checkboxgroup"!=e.type&&"attachment"!=e.type&&"phone"!=e.type?this.formValues.filter(n=>n.name==e.name)[0].value=this.myForm.get(e.name)?.value:"phone"==e.type&&(this.formValues.filter(n=>n.name==e.name)[0].value=this.myForm.get(e.name)?.value.e164Number)})}validateAllCheckboxGroup(){this.getControlByType("checkboxgroup").forEach(n=>{n.value.length>0?(n.valid=!0,this.myForm.get(n.name)?.setErrors(null)):(n.valid=!1,this.myForm.get(n.name)?.setErrors({error:!0}))})}updateCheckArray(e,n){let r=this.getControlByName(e)[0].value,l=r.indexOf(n);-1==l?r.push(n):r.splice(l,1),this.validateAllCheckboxGroup()}getControlByName(e){return this.formValues.filter(i=>i.name==e)}getControlByType(e){return this.formValues.filter(i=>i.type==e)}isControlValid(e){const n=this.myForm.controls[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e){const n=this.myForm.controls[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,n){const i=this.myForm.controls[n];return i.hasError(e)&&(i.dirty||i.touched)}isControlTouched(e){const n=this.myForm.controls[e];return n.dirty||n.touched}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(F),t.Y36(k.s),t.Y36(a.qu),t.Y36(L._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-visitors-form"]],inputs:{formInfo:"formInfo"},outputs:{visitorChanged:"visitorChanged"},decls:3,vars:3,consts:[["class","progress mb-3",4,"ngIf"],["class","mb-3 text-end",3,"disabled",4,"ngIf"],["class","dynamic-form","autcomplete","off",3,"formGroup","ngSubmit","click",4,"ngIf"],[1,"progress","mb-3"],["role","progressbar","aria-label","Animated striped example","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","100%"],[1,"mb-3","text-end"],[1,"btn","btn-sm","btn-primary",3,"click"],["autcomplete","off",1,"dynamic-form",3,"formGroup","ngSubmit","click"],[1,"row"],["class","form-group col-md-6 mb-3 ",3,"col-md-12",4,"ngFor","ngForOf"],["class","form-group mt-5 text-center",4,"ngIf"],[1,"form-group","col-md-6","mb-3"],[1,""],[4,"ngIf"],["class","d-none",4,"ngIf"],[1,"fs-16","fw-bold","d-block"],["autocomplete","new-field",1,"form-control",3,"placeholder","type","formControlName","value"],[1,"form-control",3,"innerHTML"],[1,"d-none"],["autocomplete","disabled",1,"form-control",3,"placeholder","type","formControlName","value"],[1,"form-control","d-block",3,"formControlName","config"],["rows","4",1,"form-control",3,"placeholder","formControlName","value"],[1,"fw-bold","mb-2","d-block"],["class","form-check form-check-inline mb-2",4,"ngFor","ngForOf"],[1,"form-check","form-check-inline","mb-2"],["type","radio",1,"form-check-input",3,"formControlName","name","id","value"],[1,"form-check-label",3,"for"],[1,"form-select",3,"formControlName","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngClass"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"formControlName","value","name","id","click"],["type","checkbox",1,"form-check-input",3,"formControlName","name","id"],[1,"form-check-label","fw-bold",3,"for"],[1,"form-check","form-check-solid","form-switch","fv-row"],["type","checkbox",1,"form-check-input","w-45px","h-30px",3,"formControlName","value"],[1,"form-check-label"],[1,"input-group"],["ngbDatepicker","","placeholder","yyyy-mm-dd",1,"item","form-control",3,"formControlName"],["dactivate_date","ngbDatepicker"],["type","button",1,"item","btn","btn-secondary","border",3,"click"],[1,"fa-solid","fa-calendar-days"],[1,"form-group","mt-5","text-center"],["type","reset",1,"btn","btn-outline-primary","px-5","m-2"],["type","submit",1,"btn","btn-primary","px-5","m-2"]],template:function(e,n){1&e&&(t.YNc(0,G,2,0,"div",0),t.YNc(1,R,3,2,"div",1),t.YNc(2,ft,4,7,"form",2)),2&e&&(t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf","view"==n.formInfo.mode),t.xp6(1),t.Q6J("ngIf",n.formLoaded))},dependencies:[u.mk,u.sg,u.O5,g.J4,a._Y,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a._,a.JJ,a.JL,a.sg,a.u,j.kE,u.rS]}),o})();function _t(o,s){1&o&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}function bt(o,s){if(1&o&&(t.TgZ(0,"span",34),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==e?null:e.approvalStatus))}}function xt(o,s){if(1&o&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==e?null:e.approvalStatus))}}function Ct(o,s){if(1&o&&(t.TgZ(0,"span",36),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==e?null:e.approvalStatus))}}function It(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateVisitor(i,0))}),t.ALo(1,"translate"),t._UZ(2,"i",38),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&o&&(t.s9C("ngbTooltip",t.lcZ(1,2,"Labels.Declined")),t.xp6(3),t.hij(" ",t.lcZ(4,4,"Labels.Declined")," "))}function Zt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateVisitor(i,1))}),t.ALo(1,"translate"),t._UZ(2,"i",40),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&o&&(t.MGl("ngbTooltip"," ",t.lcZ(1,2,"Labels.Approve"),""),t.xp6(3),t.hij(" ",t.lcZ(4,4,"Labels.Approve")," "))}function Tt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateVisitor(i,3))}),t.ALo(1,"translate"),t._UZ(2,"i",42),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&o&&(t.s9C("ngbTooltip",t.lcZ(1,2,"Labels.Deactivate")),t.xp6(3),t.hij(" ",t.lcZ(4,4,"Labels.Deactivate")," "))}function yt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateVisitor(i,2))}),t.ALo(1,"translate"),t._UZ(2,"i",44),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&o&&(t.s9C("ngbTooltip",t.lcZ(1,2,"Labels.Activate")),t.xp6(3),t.hij(" ",t.lcZ(4,4,"Labels.Activate")," "))}function Et(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.sendOTP(i))}),t.ALo(1,"translate"),t._UZ(2,"i",46),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&o&&(t.s9C("ngbTooltip",t.lcZ(1,2,"Labels.ResendOTP")),t.xp6(3),t.hij(" ",t.lcZ(4,4,"Labels.ResendOTP")," "))}function Ut(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.deleteVisitor(i))}),t.ALo(1,"translate"),t._UZ(2,"i",48),t._uU(3),t.ALo(4,"translate"),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.ekj("d-none",e.id==(null==n.gs.globals.userInfo||null==n.gs.globals.userInfo.currentvisitor?null:n.gs.globals.userInfo.currentvisitor.id)),t.s9C("ngbTooltip",t.lcZ(1,4,"Labels.Delete")),t.xp6(3),t.hij(" ",t.lcZ(4,6,"Labels.Delete"),"")}}function wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",1)(2,"div",12)(3,"div")(4,"div",13),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"a",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(),v=t.MAs(27);return l.openModal(v),t.KtG(l.getFormInfo(r))}),t._uU(8),t.ALo(9,"titlecase"),t.ALo(10,"titlecase"),t.qZA(),t.TgZ(11,"span",15),t._uU(12),t.qZA()()()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"span",16),t._uU(17),t.qZA(),t.TgZ(18,"span",17),t._uU(19),t.qZA()(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td",18),t._UZ(24,"i",19),t.qZA(),t.TgZ(25,"td"),t.YNc(26,bt,3,3,"span",20),t.YNc(27,xt,3,3,"span",21),t.YNc(28,Ct,3,3,"span",22),t.qZA(),t.TgZ(29,"td",23)(30,"div",24)(31,"button",25),t._UZ(32,"i",26),t.qZA(),t.TgZ(33,"div",27),t.YNc(34,It,5,6,"a",28),t.YNc(35,Zt,5,6,"a",29),t.YNc(36,Tt,5,6,"a",30),t.YNc(37,yt,5,6,"a",31),t.YNc(38,Et,5,6,"a",32),t.YNc(39,Ut,5,8,"a",33),t.qZA()()()()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(5),t.hij(" ",n.gs.getInitials(e.firstName+" "+e.lastName)," "),t.xp6(3),t.AsE(" ",t.lcZ(9,21,e.firstName)," ",t.lcZ(10,23,e.lastName)," "),t.xp6(4),t.Oqu(null==e?null:e.email),t.xp6(2),t.Oqu(null==e?null:e.phone),t.xp6(3),t.Oqu((null==e?null:e.company)||"N/A"),t.xp6(2),t.Oqu((null==e?null:e.jobTitle)||"N/A"),t.xp6(2),t.Oqu(t.xi3(22,25,null==e?null:e.createDate,"MM/dd/yy, HH:mm")),t.xp6(3),t.ekj("text-success",1==e.isActive)("text-danger",0==e.isActive),t.xp6(2),t.Q6J("ngIf","approved"==(null==e?null:e.approvalStatus)),t.xp6(1),t.Q6J("ngIf","pending"==(null==e?null:e.approvalStatus)),t.xp6(1),t.Q6J("ngIf","declined"==(null==e?null:e.approvalStatus)),t.xp6(6),t.Q6J("ngIf","pending"==(null==e?null:e.approvalStatus)),t.xp6(1),t.Q6J("ngIf","pending"==(null==e?null:e.approvalStatus)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isActive),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isActive)),t.xp6(1),t.Q6J("ngIf","approved"==(null==e?null:e.approvalStatus)),t.xp6(1),t.Q6J("ngIf",n.gs.globals.actions.canDelete)}}function At(o,s){1&o&&t._UZ(0,"img",60),2&o&&t.Q6J("src",s.$implicit,t.LSH)}function Ft(o,s){if(1&o&&(t.TgZ(0,"div",56)(1,"div",57)(2,"label",58),t._uU(3,"Attachments"),t.qZA(),t.TgZ(4,"div",18),t.YNc(5,At,1,1,"img",59),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",null==e.userInfo?null:e.userInfo.attachmentsUrl)}}function kt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",49)(1,"h4",50),t._uU(2,"Visitor"),t.qZA()(),t.TgZ(3,"div",51)(4,"app-event-visitors-form",52),t.NdJ("visitorChanged",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.visitorChanged(i))}),t.qZA(),t.YNc(5,Ft,6,1,"div",53),t.qZA(),t.TgZ(6,"div",54)(7,"button",55),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(8,"Close"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("formInfo",e.formInfo),t.xp6(1),t.Q6J("ngIf",(null==e.userInfo?null:e.userInfo.attachmentsUrl.length)>0)}}function Lt(o,s){1&o&&t._UZ(0,"app-access-denied")}let Dt=(()=>{class o{constructor(e,n,i,r){this.gs=e,this.cd=n,this.us=i,this.modalService=r,this.isLoading=!1,this.eventUpdated=new t.vpe,this.unsubscribe$=new _.x,this.dtOptions={},this.dtTrigger=new _.x,this.formInfo={},this.currentPage=0,this.selectedUsers=[]}ngOnInit(){this.dtOptions={pagingType:"simple_numbers",pageLength:12,responsive:!0,language:c.N.dtLanguage,dom:"Bfrtip",order:[[3,"desc"]],buttons:[{extend:"print",className:"btn btn-light"},{extend:"excel",className:"btn btn-success"}]},this.eventInfo=this.eventInput,console.log(this.eventInfo),this.eventId=this.gs.globals.userInfo.currentEvent.id,this.getVistors()}ngAfterViewInit(){this.dtTrigger.next()}change(){this.cd.detectChanges()}getVistors(){this.isLoading=!0,this.selectedUsers=[],this.us.getVisitorsByEventId(this.eventId).pipe((0,f.R)(this.unsubscribe$)).subscribe({next:e=>{console.log(e),this.visitorsList=e?.data,this.isLoading=!1,this.rerender()},error:e=>{}})}getRandomColor(){var e=["#cc0000","#00cc00","#0000cc"];return e[Math.floor(Math.random()*e.length)]}visitorChanged(e){e&&(this.modalService.dismissAll(),this.isLoading=!0,this.getVistors())}getPageInfo(){this.dtElement.dtInstance.then(e=>{this.currentPage=e.page.info().page})}rerender(){this.dtElement.dtInstance.then(e=>{e.clear(),e.destroy(),this.dtTrigger.next(),this.goToPage()}),this.getPageInfo()}goToPage(){this.dtElement.dtInstance.then(e=>{e.page(this.currentPage).draw(!1)})}sendOTP(e){console.log(e),b().fire({title:"Are you sure?",text:`You want to resend OPT for ${e?.firstName} ${e?.lastName}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send it!"}).then(n=>{n.isConfirmed&&this.us.resendOPT(e.id).pipe((0,f.R)(this.unsubscribe$)).subscribe(i=>{console.log(i),b().fire({icon:"success",title:"Sent!",text:"Your OTP has been sent.",showConfirmButton:!1,timer:1500})},i=>{console.log(i),b().fire({icon:"error",title:"Error!",text:`${i.error}`,showConfirmButton:!1,timer:1500})})})}openModal(e){this.isLoading=!1,this.modalService.open(e,{centered:!0,size:"xl"})}getFormInfo(e){this.formInfo.visitorId=e.id,this.formInfo.formId=this.gs.globals.userInfo.currentEvent.visitorRegistrationFormId,this.formInfo.mode="view",this.getUserInfo(e),console.log(this.formInfo)}getUserInfo(e){console.log(e)}updateVisitor(e,n){0==n?(e.approvalStatus="declined",this.updateVisitorService(e)):1==n?(e.approvalStatus="approved",this.updateVisitorService(e)):2==n?(e.isActive=!0,this.updateVisitorService(e)):3==n&&(e.isActive=!1,this.updateVisitorService(e)),console.log(e)}updateVisitorService(e){this.isLoading=!0,this.us.updateUserByID(e,e.id).subscribe({next:n=>{console.log(n),this.isLoading=!0,this.getVistors()},error:n=>{console.log(n),this.isLoading=!1}})}deleteVisitor(e){b().fire({text:"Are you sure you want to delete "+e?.firstName+" "+e?.lastName+"?",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&(console.log("clicked"),this.isLoading=!0,this.us.deleteUser(e.id).subscribe(i=>{console.log(i),b().fire({icon:"success",text:"Your work has been saved",showConfirmButton:!1,timer:1e3}),this.isLoading=!0,this.getVistors()},i=>{console.log(i),b().fire({icon:"error",showConfirmButton:!1,timer:1e3}),this.isLoading=!1}))})}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(t.sBO),t.Y36(F),t.Y36(g.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-visitors-registeration"]],viewQuery:function(e,n){if(1&e&&t.Gf(T.G,5),2&e){let i;t.iGM(i=t.CRH())&&(n.dtElement=i.first)}},inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:29,vars:21,consts:[["class","progress mb-3",4,"ngIf"],[1,""],[1,"table-responsive","py-2"],["datatable","",1,"table","table-hover","table-sm","table-striped",3,"dtOptions","dtTrigger"],[1,"minw-150"],[1,"no-sort","text-center"],[1,"text-end","no-sort"],[4,"ngFor","ngForOf"],["visitorModal",""],[4,"ngIf"],[1,"progress","mb-3"],["role","progressbar","aria-label","Animated striped example","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","100%"],[1,"d-flex"],[1,"avatar"],[1,"text-decoration-none","fw-bold","fs-14","cursor-pointer",3,"click"],[1,"d-block","text-secondary"],[1,"d-block","fw-bold"],[1,"d-block"],[1,"text-center"],[1,"fa-solid","fa-circle","fa-fade"],["class","badge bg-success",4,"ngIf"],["class","badge bg-warning",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"text-end"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-secondary"],[1,"fa-solid","fa-users-gear"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"m-0","p-2"],["ngbDropdownItem","","placement","start","class","btn  btn-outline-danger",3,"ngbTooltip","click",4,"ngIf"],["ngbDropdownItem","","placement","start","class","btn btn-success",3,"ngbTooltip","click",4,"ngIf"],["ngbDropdownItem","","placement","start","class","btn  btn-outline-warning ",3,"ngbTooltip","click",4,"ngIf"],["ngbDropdownItem","","placement","start","class","btn  btn-outline-success ",3,"ngbTooltip","click",4,"ngIf"],["ngbDropdownItem","","class","btn btn-primary","placement","start",3,"ngbTooltip","click",4,"ngIf"],["ngbDropdownItem","","class","btn btn-danger","placement","start",3,"d-none","ngbTooltip","click",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-warning"],[1,"badge","bg-danger"],["ngbDropdownItem","","placement","start",1,"btn","btn-outline-danger",3,"ngbTooltip","click"],[1,"fas","fa-ban"],["ngbDropdownItem","","placement","start",1,"btn","btn-success",3,"ngbTooltip","click"],[1,"fas","fa-check-double"],["ngbDropdownItem","","placement","start",1,"btn","btn-outline-warning",3,"ngbTooltip","click"],[1,"fas","fa-times-circle"],["ngbDropdownItem","","placement","start",1,"btn","btn-outline-success",3,"ngbTooltip","click"],[1,"fas","fa-check-circle"],["ngbDropdownItem","","placement","start",1,"btn","btn-primary",3,"ngbTooltip","click"],[1,"fas","fa-lock"],["ngbDropdownItem","","placement","start",1,"btn","btn-danger",3,"ngbTooltip","click"],[1,"fa-regular","fa-trash-can"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[3,"formInfo","visitorChanged"],["class","row bg-light rounded border",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"row","bg-light","rounded","border"],[1,"col-md-12","p-3"],[1,"fw-bolder","d-block","mb-2"],["class","img img-fluid img-thumbnail mb-2","loading","lazy",3,"src",4,"ngFor","ngForOf"],["loading","lazy",1,"img","img-fluid","img-thumbnail","mb-2",3,"src"]],template:function(e,n){1&e&&(t.YNc(0,_t,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",5),t._uU(19,"Active Status"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Registration Status"),t.qZA(),t.TgZ(22,"th",6),t._uU(23,"Actions"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,wt,40,28,"tr",7),t.qZA()()()(),t.YNc(26,kt,9,2,"ng-template",null,8,t.W1O),t.YNc(28,Lt,1,0,"app-access-denied",9)),2&e&&(t.Q6J("ngIf",n.isLoading),t.xp6(1),t.ekj("loading-data",n.isLoading)("disabled",n.isLoading),t.xp6(2),t.Q6J("dtOptions",n.dtOptions)("dtTrigger",n.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(8,13,"Labels.Name")),t.xp6(3),t.Oqu(t.lcZ(11,15,"Labels.Phone")),t.xp6(3),t.Oqu(t.lcZ(14,17,"Labels.Company")),t.xp6(3),t.Oqu(t.lcZ(17,19,"Labels.CreatedDate")),t.xp6(9),t.Q6J("ngForOf",n.visitorsList),t.xp6(3),t.Q6J("ngIf",!n.gs.globals.actions.canView))},dependencies:[u.sg,u.O5,Z.A,g.jt,g.iD,g.Vi,g.TH,g._L,T.G,ht,u.rS,u.uU,E.X$]}),o})(),Nt=(()=>{class o{constructor(){this.eventUpdated=new t.vpe}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-bulk-upload"]],inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"event-bulk-upload works!"),t.qZA())}}),o})();function qt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.TgZ(1,"div",3)(2,"label",4),t._uU(3,"Venue"),t.qZA(),t._UZ(4,"input",5),t.qZA(),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Address"),t.qZA(),t._UZ(8,"textarea",6),t.qZA(),t.TgZ(9,"div",3)(10,"label",4),t._uU(11,"Location (Google Map Iframe Url)"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",8)(14,"button",9),t._uU(15,"Update"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.updateEventLocationForm),t.xp6(8),t.ekj("is-invalid",e.isControlInvalid("address")),t.xp6(4),t.ekj("is-invalid",e.isControlInvalid("location"))}}function Jt(o,s){1&o&&(t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"span",13),t._uU(4,"Loading..."),t.qZA()()()())}let Mt=(()=>{class o{constructor(e,n){this.gs=e,this.es=n,this.eventUpdated=new t.vpe,this.unsubscribe$=new _.x,this.isLoading=!1,this.updateEventLocationForm=new a.cw({venue:new a.NI("",a.kI.required),address:new a.NI("",a.kI.required),location:new a.NI("",a.kI.required)})}ngOnInit(){this.updateEventLocationForm.controls.venue.setValue(this.eventInput.venue),this.updateEventLocationForm.controls.address.setValue(this.eventInput.address),this.updateEventLocationForm.controls.location.setValue(this.eventInput.location),this.updateEventLocationForm.markAllAsTouched()}submit(){this.updateEventLocationForm.valid&&(this.isLoading=!0,this.eventInput.venue=this.updateEventLocationForm.controls.venue.value,this.eventInput.address=this.updateEventLocationForm.controls.address.value,this.eventInput.location=this.updateEventLocationForm.controls.location.value,this.es.updateEvent(this.eventInput,this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]).pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{console.log(e),this.isLoading=!1,this.eventUpdated.emit(!0)}))}get f(){return this.updateEventLocationForm.controls}isControlValid(e){const n=this.f[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e){const n=this.f[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,n){const i=this.f[n];return i.hasError(e)&&(i.dirty||i.touched)}isControlTouched(e){const n=this.f[e];return n.dirty||n.touched}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(C.n))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-event-location"]],inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:2,vars:2,consts:[["class","row",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-12","mb-4"],[1,"fw-bolder"],["type","text","formControlName","venue",1,"form-control"],["type","text","rows","5","formControlName","address",1,"form-control"],["type","text","formControlName","location",1,"form-control"],[1,"col-md-12","my-4","text-center"],["type","submit",1,"btn","btn-primary"],[1,"text-center","py-5"],[1,"d-flex","justify-content-center"],["role","status",1,"mb-4","spinner-grow","text-primary"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.YNc(0,qt,16,5,"form",0),t.YNc(1,Jt,5,0,"div",1)),2&e&&(t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),o})();const Vt=["dp"];function Ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"span",15),t.NdJ("mouseenter",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.hoveredDate=r)})("mouseleave",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.hoveredDate=null)}),t._uU(1),t.qZA()}if(2&o){const e=s.$implicit,n=s.focused,i=t.oxw(2);t.ekj("focused",n)("range",i.isRange(e))("faded",i.isHovered(e)||i.isInside(e)),t.xp6(1),t.hij(" ",e.day," ")}}const Yt=function(){return{year:2023,month:1,day:1}};function Qt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.TgZ(1,"div",3)(2,"label",4),t._uU(3,"Start Date"),t.qZA(),t._UZ(4,"input",5),t.qZA(),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"End Date"),t.qZA(),t._UZ(8,"input",6),t.qZA(),t.TgZ(9,"div",7)(10,"ngb-datepicker",8,9),t.NdJ("dateSelect",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.onDateSelection(i))}),t.qZA(),t.YNc(12,Ot,2,7,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(14,"div",11)(15,"label",4),t._uU(16,"Visiting Hours"),t.qZA(),t._UZ(17,"textarea",12),t.qZA(),t.TgZ(18,"div",13)(19,"button",14),t._uU(20,"Update"),t.qZA()()()}if(2&o){const e=t.MAs(13),n=t.oxw();t.Q6J("formGroup",n.updateEventDateForm),t.xp6(4),t.ekj("is-invalid",n.isControlInvalid("startDate")),t.xp6(4),t.ekj("is-invalid",n.isControlInvalid("endDate")),t.xp6(2),t.Q6J("startDate",n.getFormatedDate(n.eventInput.startDate))("minDate",t.DdM(11,Yt))("displayMonths",2)("dayTemplate",e),t.xp6(7),t.ekj("is-invalid",n.isControlInvalid("visitingHours"))}}function $t(o,s){1&o&&(t.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"span",19),t._uU(4,"Loading..."),t.qZA()()()())}let Bt=(()=>{class o{constructor(e,n,i,r,l){this.gs=e,this.es=n,this.calendar=i,this.datepipe=r,this.formatter=l,this.eventUpdated=new t.vpe,this.unsubscribe$=new _.x,this.isLoading=!1,this.hoveredDate=null,this.updateEventDateForm=new a.cw({startDate:new a.NI("",a.kI.required),endDate:new a.NI("",a.kI.required),visitingHours:new a.NI("",a.kI.required)})}ngOnInit(){this.updateEventDateForm.controls.startDate.setValue(this.eventInput.startDate.split("T")[0]),this.updateEventDateForm.controls.endDate.setValue(this.eventInput.endDate.split("T")[0]),this.updateEventDateForm.controls.visitingHours.setValue(this.eventInput.visitingHours),this.fromDate=this.getFormatedDate(this.eventInput.startDate),this.toDate=this.getFormatedDate(this.eventInput.endDate),this.updateEventDateForm.markAllAsTouched()}submit(){this.updateEventDateForm.valid&&(this.isLoading=!0,this.eventInput.startDate=this.updateEventDateForm.controls.startDate.value,this.eventInput.endDate=this.updateEventDateForm.controls.endDate.value,this.eventInput.visitingHours=this.updateEventDateForm.controls.visitingHours.value,this.es.updateEvent(this.eventInput,this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]).pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{console.log(e),this.isLoading=!1,this.eventUpdated.emit(!0)}))}onDateSelection(e){this.fromDate||this.toDate?this.fromDate&&!this.toDate&&e.after(this.fromDate)?(this.toDate=e,this.updateEventDateForm.controls.endDate.setValue(this.setFormatedDate(this.toDate))):(this.toDate=null,this.fromDate=e,this.updateEventDateForm.controls.endDate.setValue(null),this.updateEventDateForm.controls.startDate.setValue(this.setFormatedDate(this.fromDate))):(this.fromDate=e,this.updateEventDateForm.controls.startDate.setValue(this.setFormatedDate(this.fromDate)))}isHovered(e){return this.fromDate&&!this.toDate&&this.hoveredDate&&e.after(this.fromDate)&&e.before(this.hoveredDate)}isInside(e){return this.toDate&&e.after(this.fromDate)&&e.before(this.toDate)}isRange(e){return e.equals(this.fromDate)||this.toDate&&e.equals(this.toDate)||this.isInside(e)||this.isHovered(e)}getFormatedDate(e){let n=new Date(e.split("T")[0]);return{year:n.getUTCFullYear(),month:n.getMonth()+1,day:n.getDate()}}setFormatedDate(e){return e=e.year+"-"+e.month+"-"+e.day,this.datepipe.transform(new Date(e),"yyyy-MM-dd")}get f(){return this.updateEventDateForm.controls}isControlValid(e){const n=this.f[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e){const n=this.f[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,n){const i=this.f[n];return i.hasError(e)&&(i.dirty||i.touched)}isControlTouched(e){const n=this.f[e];return n.dirty||n.touched}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(C.n),t.Y36(g.vL),t.Y36(u.uU),t.Y36(g.NG))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-event-datetime"]],viewQuery:function(e,n){if(1&e&&t.Gf(Vt,5),2&e){let i;t.iGM(i=t.CRH())&&(n.dp=i.first)}},inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:2,vars:2,consts:[["class","row",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-6","mb-4"],[1,"fw-bolder"],["type","text","formControlName","startDate",1,"form-control","disabled"],["type","text","formControlName","endDate",1,"form-control","disabled"],[1,"col-12","text-center","bg-light","mb-3"],["outsideDays","hidden",3,"startDate","minDate","displayMonths","dayTemplate","dateSelect"],["dp",""],["t",""],[1,"col-md-12","mb-4"],["type","text","rows","3","formControlName","visitingHours",1,"form-control"],[1,"col-md-12","my-4","text-center"],["type","submit",1,"btn","btn-primary"],[1,"custom-day",3,"mouseenter","mouseleave"],[1,"text-center","py-5"],[1,"d-flex","justify-content-center"],["role","status",1,"mb-4","spinner-grow","text-primary"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.YNc(0,Qt,21,12,"form",0),t.YNc(1,$t,5,0,"div",1)),2&e&&(t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading))},dependencies:[u.O5,g.VL,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".form-group.hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]}),o})();function St(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.TgZ(1,"div",3)(2,"label",4),t._uU(3,"Event Name"),t.qZA(),t._UZ(4,"input",5),t.qZA(),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Event Description"),t.qZA(),t._UZ(8,"textarea",6),t.qZA(),t.TgZ(9,"div",7)(10,"button",8),t._uU(11,"Update"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.updateEventLocationForm),t.xp6(4),t.ekj("is-invalid",e.isControlInvalid("name")),t.xp6(4),t.ekj("is-invalid",e.isControlInvalid("description"))}}function jt(o,s){1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"span",12),t._uU(4,"Loading..."),t.qZA()()()())}let Gt=(()=>{class o{constructor(e,n){this.gs=e,this.es=n,this.eventUpdated=new t.vpe,this.unsubscribe$=new _.x,this.isLoading=!1,this.updateEventLocationForm=new a.cw({name:new a.NI("",a.kI.required),description:new a.NI("",a.kI.required)})}ngOnInit(){this.updateEventLocationForm.controls.name.setValue(this.eventInput.name),this.updateEventLocationForm.controls.description.setValue(this.eventInput.description),this.updateEventLocationForm.markAllAsTouched()}submit(){this.updateEventLocationForm.valid&&(this.isLoading=!0,this.eventInput.name=this.updateEventLocationForm.controls.name.value,this.eventInput.description=this.updateEventLocationForm.controls.description.value,this.es.updateEvent(this.eventInput,this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]).pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{console.log(e),this.isLoading=!1,this.eventUpdated.emit(!0)}))}get f(){return this.updateEventLocationForm.controls}isControlValid(e){const n=this.f[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e){const n=this.f[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,n){const i=this.f[n];return i.hasError(e)&&(i.dirty||i.touched)}isControlTouched(e){const n=this.f[e];return n.dirty||n.touched}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(C.n))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-event-info"]],inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:2,vars:2,consts:[["class","row",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-12","mb-4"],[1,"fw-bolder"],["type","text","formControlName","name",1,"form-control"],["type","text","rows","5","formControlName","description",1,"form-control"],[1,"col-md-12","my-4","text-center"],["type","submit",1,"btn","btn-primary"],[1,"text-center","py-5"],[1,"d-flex","justify-content-center"],["role","status",1,"mb-4","spinner-grow","text-primary"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.YNc(0,St,12,5,"form",0),t.YNc(1,jt,5,0,"div",1)),2&e&&(t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),o})();function Rt(o,s){if(1&o&&t._UZ(0,"iframe",19),2&o){const e=t.oxw();t.Q6J("src",e.mapLocation,t.uOi)}}function Ht(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"h4",21),t._uU(2,"Update Event Location"),t.qZA()(),t.TgZ(3,"div",22)(4,"app-update-event-location",23),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.eventUpdatedEmit())}),t.qZA()(),t.TgZ(5,"div",24)(6,"button",25),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(7,"Close"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("eventInput",e.eventInfo)}}function Kt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"h4",21),t._uU(2,"Update Event Date & Time"),t.qZA()(),t.TgZ(3,"div",22)(4,"app-update-event-datetime",23),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.eventUpdatedEmit())}),t.qZA()(),t.TgZ(5,"div",24)(6,"button",25),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(7,"Close"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("eventInput",e.eventInfo)}}function Wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"h4",21),t._uU(2,"Update Event Info"),t.qZA()(),t.TgZ(3,"div",22)(4,"app-update-event-info",23),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.eventUpdatedEmit())}),t.qZA()(),t.TgZ(5,"div",24)(6,"button",25),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(7,"Close"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("eventInput",e.eventInfo)}}let Pt=(()=>{class o{constructor(e,n,i,r){this.gs=e,this.es=n,this.modalService=i,this.sanitizer=r,this.isLoading=!1,this.eventUpdated=new t.vpe,this.unsubscribe$=new _.x}ngOnInit(){this.eventInfo=this.eventInput,this.mapLocation=this.sanitizer.bypassSecurityTrustResourceUrl(this.eventInfo?.location),console.log(this.eventInfo)}openModal(e){this.isLoading=!1,this.modalService.open(e,{centered:!0,size:"xl"})}eventDays(){var e=new Date(this.eventInfo?.startDate),n=new Date(this.eventInfo?.endDate),i=Math.abs(e.getTime()-n.getTime());return Math.ceil(i/864e5)+1}eventUpdatedEmit(){this.isLoading=!0,this.modalService.dismissAll(),this.getEventDetails()}getEventDetails(){this.isLoading=!0,this.eventId=this.gs.globals.userInfo.currentEvent.id,this.es.getEventByEventId(this.eventId,this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]).pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{console.log(e),this.mapLocation=this.sanitizer.bypassSecurityTrustResourceUrl(e?.data?.location),this.eventInfo=e?.data,this.updateHeaderEventlist(),this.isLoading=!1})}updateHeaderEventlist(){console.log(this.gs.globals.userInfo.userEvents),this.gs.globals.userInfo.userEvents.filter(n=>(n.id==this.gs.globals.userInfo.currentEvent.id&&(n.name=this.eventInfo.name),n)),this.gs.globals.userInfo.currentEvent.name=this.eventInfo.name,this.updateBreadcrumb(),this.gs.updateLocalStorage(this.gs.globals),console.log(this.gs.globals)}updateBreadcrumb(){this.gs.globals.breadcrumb=[{name:"dashboard",url:"/"},{name:"Events",url:"/events"},{name:this.gs.globals.userInfo.currentEvent.name,url:"/events"}],this.gs.setGlobals(this.gs.globals)}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(C.n),t.Y36(g.FF),t.Y36(U.H7))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-info"]],inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:68,vars:19,consts:[[1,"row"],[1,"col-12","mb-2"],[1,"border","rounded","p-3"],[1,"d-flex","justify-content-between","mb-2"],[1,"fw-bold","text-tertiary"],[1,"btn","btn-sm","btn-icon","btn-light",3,"click"],[1,"far","fa-edit"],[1,"d-flex","justify-content-between"],[1,"text-center","col-md-4","mb-2"],[1,"d-inline-block"],[1,"fw-bold"],[1,"text-center","col-md-12"],[1,"alert","m-0","alert-secondary"],[1,"col-12"],[1,"text-center","col-md-8","mb-2"],["width","100%","height","400px",3,"src",4,"ngIf"],["locationModal",""],["dateModal",""],["infoModal",""],["width","100%","height","400px",3,"src"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[3,"eventInput","eventUpdated"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h6",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(67);return t.KtG(n.openModal(l))}),t._UZ(7,"i",6),t.qZA()(),t.TgZ(8,"span"),t._uU(9),t.qZA()()(),t.TgZ(10,"div",1)(11,"div",2)(12,"div",7)(13,"h6",4),t._uU(14,"Date & Time"),t.qZA(),t.TgZ(15,"button",5),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(65);return t.KtG(n.openModal(l))}),t._UZ(16,"i",6),t.qZA()(),t.TgZ(17,"div",0)(18,"div",8)(19,"span",9)(20,"b",10),t._uU(21,"Days"),t.qZA(),t._UZ(22,"br"),t._uU(23),t.qZA()(),t.TgZ(24,"div",8)(25,"b",10),t._uU(26,"Start Date"),t.qZA(),t._UZ(27,"br"),t._uU(28),t.ALo(29,"date"),t.qZA(),t.TgZ(30,"div",8)(31,"b",10),t._uU(32,"End Date"),t.qZA(),t._UZ(33,"br"),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"div",11)(37,"div",12)(38,"b",10),t._uU(39,"Visiting Hours"),t.qZA(),t._UZ(40,"br"),t._uU(41),t.qZA()()()()(),t.TgZ(42,"div",13)(43,"div",2)(44,"div",7)(45,"h6",4),t._uU(46,"Location"),t.qZA(),t.TgZ(47,"button",5),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(63);return t.KtG(n.openModal(l))}),t._UZ(48,"i",6),t.qZA()(),t.TgZ(49,"div",0)(50,"div",8)(51,"b",10),t._uU(52,"Venue"),t.qZA(),t._UZ(53,"br"),t._uU(54),t.qZA(),t.TgZ(55,"div",14)(56,"b",10),t._uU(57,"Address"),t.qZA(),t._UZ(58,"br"),t._uU(59),t.qZA(),t.TgZ(60,"div",11),t.YNc(61,Rt,1,1,"iframe",15),t.qZA()()()()(),t.YNc(62,Ht,8,1,"ng-template",null,16,t.W1O),t.YNc(64,Kt,8,1,"ng-template",null,17,t.W1O),t.YNc(66,Wt,8,1,"ng-template",null,18,t.W1O)}2&e&&(t.xp6(5),t.Oqu((null==n.eventInfo?null:n.eventInfo.name)||"N/A"),t.xp6(1),t.ekj("disabled",n.isLoading),t.xp6(3),t.Oqu((null==n.eventInfo?null:n.eventInfo.description)||"N/A"),t.xp6(6),t.ekj("disabled",n.isLoading),t.xp6(8),t.hij("",n.eventDays()," "),t.xp6(5),t.hij("",t.lcZ(29,15,null==n.eventInfo?null:n.eventInfo.startDate)," "),t.xp6(6),t.hij("",t.lcZ(35,17,null==n.eventInfo?null:n.eventInfo.endDate)," "),t.xp6(7),t.hij("",(null==n.eventInfo?null:n.eventInfo.visitingHours)||"N/A"," "),t.xp6(6),t.ekj("disabled",n.isLoading),t.xp6(7),t.hij("",(null==n.eventInfo?null:n.eventInfo.venue)||"N/A"," "),t.xp6(5),t.hij("",(null==n.eventInfo?null:n.eventInfo.address)||"N/A"," "),t.xp6(2),t.Q6J("ngIf",null==n.eventInfo?null:n.eventInfo.location))},dependencies:[u.O5,Mt,Bt,Gt,u.uU]}),o})();class zt{constructor(s,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),i=n.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",n.setAttribute("aria-hidden","true"),n.value=s,n.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(n)}copy(){const s=this._textarea;let e=!1;try{if(s){const n=this._document.activeElement;s.select(),s.setSelectionRange(0,s.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch{}return e}destroy(){const s=this._textarea;s&&(s.remove(),this._textarea=void 0)}}let Xt=(()=>{class o{constructor(e){this._document=e}copy(e){const n=this.beginCopy(e),i=n.copy();return n.destroy(),i}beginCopy(e){return new zt(e,this._document)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(u.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function te(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li",13)(1,"span",14),t._uU(2),t.qZA(),t.TgZ(3,"span")(4,"button",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(),v=t.MAs(16);return l.openModal(v),t.KtG(l.copyIframe(r.id))}),t._UZ(5,"i",16),t.qZA(),t.TgZ(6,"button",17),t._UZ(7,"i",18),t.qZA(),t.TgZ(8,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(),v=t.MAs(12);return t.KtG(l.openFullModal(v,null==r?null:r.id))}),t._UZ(9,"i",20),t.qZA()()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(4),t.MGl("routerLink","/forms/",null==e?null:e.id,"")}}function ee(o,s){if(1&o&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ne(o,s){if(1&o&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function oe(o,s){if(1&o&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ie(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",21),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.TgZ(1,"div",22)(2,"label",3),t._uU(3,"Default Registration Form"),t.qZA(),t.TgZ(4,"select",23),t.YNc(5,ee,2,2,"option",24),t.qZA()(),t.TgZ(6,"div",22)(7,"label",3),t._uU(8,"Exhibitor Interest Form"),t.qZA(),t.TgZ(9,"select",25),t.YNc(10,ne,2,2,"option",24),t.qZA()(),t.TgZ(11,"div",22)(12,"label",3),t._uU(13,"Contact Us Form"),t.qZA(),t.TgZ(14,"select",26),t.YNc(15,oe,2,2,"option",24),t.qZA()(),t.TgZ(16,"div",27)(17,"button",28),t._uU(18,"Update"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.updateEventFormsForm),t.xp6(4),t.ekj("is-invalid",e.isControlInvalid("visitorRegistrationFormId")),t.xp6(1),t.Q6J("ngForOf",e.registrationForms),t.xp6(4),t.ekj("is-invalid",e.isControlInvalid("exhibitorInterestFormId")),t.xp6(1),t.Q6J("ngForOf",e.exhibitorInterestForms),t.xp6(4),t.ekj("is-invalid",e.isControlInvalid("contactFormId")),t.xp6(1),t.Q6J("ngForOf",e.contactUsForms)}}function se(o,s){1&o&&(t.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"span",33),t._uU(4,"Loading..."),t.qZA()()()())}function re(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34)(1,"h4",35),t._uU(2,"Form Preview"),t.qZA()(),t.TgZ(3,"div",36),t._UZ(4,"iframe",37),t.qZA(),t.TgZ(5,"div",38)(6,"button",39),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(7,"Close"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("src",e.iframeUrl,t.uOi)}}function ae(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34)(1,"h4",40),t._uU(2,"Edit Form"),t.qZA()(),t._UZ(3,"div",41),t.TgZ(4,"div",38)(5,"button",39),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(6,"Close"),t.qZA()()}}function le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34)(1,"h4",40),t._uU(2,"Iframe"),t.qZA()(),t.TgZ(3,"div",41)(4,"pre"),t._uU(5),t.qZA(),t.TgZ(6,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyText(i.iframe))}),t._UZ(7,"i",43),t.qZA()(),t.TgZ(8,"div",38)(9,"button",39),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.close("Close click"))}),t._uU(10,"Close"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.iframe)}}let ce=(()=>{class o{constructor(e,n,i,r,l,v,w){this.gs=e,this.toastr=n,this.es=i,this.domSanitizer=r,this.modalService=l,this.fs=v,this.clipboard=w,this.eventUpdated=new t.vpe,this.unsubscribe$=new _.x,this.isLoading=!1,this.updateEventFormsForm=new a.cw({visitorRegistrationFormId:new a.NI(""),exhibitorInterestFormId:new a.NI(""),contactFormId:new a.NI("")})}ngOnInit(){this.getForms(),this.iframeUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.iframeUrl),console.log(this.iframeUrl)}getForms(){this.isLoading=!0,this.fs.getForms().pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{console.log(e),this.exhibitorInterestForms=this.removeRegistrationForm(e.data),this.contactUsForms=this.removeRegistrationForm(e.data),this.registrationForms=this.getRegistrationForms(e?.data),this.isLoading=!1,this.updateEventFormsForm.controls.visitorRegistrationFormId.setValue(this.gs.globals.userInfo.currentEvent.visitorRegistrationFormId),this.updateEventFormsForm.controls.contactFormId.setValue(this.gs.globals.userInfo.currentEvent.contactFormId),this.updateEventFormsForm.controls.exhibitorInterestFormId.setValue(this.gs.globals.userInfo.currentEvent.exhibitorInterestFormId),this.updateEventFormsForm.markAllAsTouched()})}copyIframe(e){this.iframe='\n    <iframe src="'+c.N.iframe+this.eventInput.id+"/form/"+e+'" width="100%" height="450" style="border:0;"></iframe>\n    '}copyText(e){this.clipboard.copy(e),this.toastr.success("Copied to clipboard")}openModal(e){this.isLoading=!1,this.modalService.open(e,{centered:!0,size:"xl"})}openFullModal(e,n){this.iframeUrl=c.N.iframe+this.gs.globals.userInfo.currentEvent.id+"/form/"+n,this.iframeUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.iframeUrl),console.log(this.iframeUrl),this.modalService.open(e,{fullscreen:!0})}removeRegistrationForm(e){return e.filter(n=>{if("registration"!=n.type)return n})}getRegistrationForms(e){return e.filter(n=>{if("registration"==n.type)return n})}submit(){this.updateEventFormsForm.valid&&(this.isLoading=!0,this.eventInput.exhibitorInterestFormId=this.updateEventFormsForm.controls.exhibitorInterestFormId.value,this.eventInput.contactFormId=this.updateEventFormsForm.controls.contactFormId.value,this.eventInput.visitorRegistrationFormId=this.updateEventFormsForm.controls.visitorRegistrationFormId.value,this.es.updateEvent(this.eventInput,this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]).pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{console.log(e),this.isLoading=!1,this.gs.globals.userInfo.currentEvent=this.eventInput,this.gs.setGlobals(this.gs.globals),this.gs.updateLocalStorage(this.gs.globals),this.eventUpdated.emit(!0)}))}get f(){return this.updateEventFormsForm.controls}isControlValid(e){const n=this.f[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e){const n=this.f[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,n){const i=this.f[n];return i.hasError(e)&&(i.dirty||i.touched)}isControlTouched(e){const n=this.f[e];return n.dirty||n.touched}ngOnDestroy(){console.log("distroyed"),this.unsubscribe$.next(),this.unsubscribe$.complete(),console.log("unsubscribe")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(L._W),t.Y36(C.n),t.Y36(U.H7),t.Y36(g.FF),t.Y36(k.s),t.Y36(Xt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-forms"]],inputs:{eventInput:"eventInput"},outputs:{eventUpdated:"eventUpdated"},decls:17,vars:5,consts:[[1,"container"],[1,"row","mb-4"],[1,"border","col-12","p-3","rounded"],[1,"text-primary","fw-bolder"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"row"],["class","row",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","fullscreen-modal"],["formPreview",""],["editFormModal",""],["iframeModal",""],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"fs-14","fw-bolder"],["ngbTooltip","Copy Iframe",1,"btn","btn-icon","btn-warning","me-2","btn-sm",3,"click"],[1,"fas","fa-code"],["ngbTooltip","Edit Form",1,"btn","btn-icon","btn-primary","me-2","btn-sm",3,"routerLink"],[1,"far","fa-edit"],["ngbTooltip","Add Visitor",1,"btn","btn-icon","btn-success","me-2","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-12","form-group","my-3"],["formControlName","visitorRegistrationFormId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formControlName","exhibitorInterestFormId",1,"form-select"],["formControlName","contactFormId",1,"form-select"],[1,"col-md-12","my-4","text-center"],["type","submit",1,"btn","btn-primary","btn-sm"],[3,"value"],[1,"text-center","py-5"],[1,"d-flex","justify-content-center"],["role","status",1,"mb-4","spinner-grow","text-primary"],[1,"visually-hidden"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","bg-loader"],["width","100%","height","480px",2,"height","calc(100vh - 212px)",3,"src"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","text-center"],["ngbTooltip","Copy HTML",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa-regular","fa-copy"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),t._uU(4,"Registration Forms"),t.qZA(),t.TgZ(5,"ul",4),t.YNc(6,te,10,2,"li",5),t.qZA()()(),t.TgZ(7,"div",6)(8,"div",2),t.YNc(9,ie,19,10,"form",7),t.qZA()(),t.YNc(10,se,5,0,"div",8),t.qZA(),t.YNc(11,re,8,1,"ng-template",9,10,t.W1O),t.YNc(13,ae,7,0,"ng-template",null,11,t.W1O),t.YNc(15,le,11,1,"ng-template",null,12,t.W1O)),2&e&&(t.xp6(5),t.ekj("disabled",n.isLoading),t.xp6(1),t.Q6J("ngForOf",n.registrationForms),t.xp6(3),t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading))},dependencies:[u.sg,u.O5,x.rH,g._L,a._Y,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u]}),o})();function de(o,s){1&o&&(t.TgZ(0,"div",11),t._UZ(1,"div",12),t.qZA())}function pe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-event-info",14),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.eventUpdatedEmit())}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("eventInput",e.eventInfo)}}function ue(o,s){if(1&o&&t.YNc(0,pe,1,1,"app-event-info",13),2&o){const e=t.oxw();t.Q6J("ngIf",e.eventInfo)}}function me(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-event-visitors-registeration",14),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.eventUpdatedEmit())}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("eventInput",e.eventInfo)}}function ge(o,s){if(1&o&&t.YNc(0,me,1,1,"app-event-visitors-registeration",13),2&o){const e=t.oxw();t.Q6J("ngIf",e.eventInfo)}}function ve(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-event-forms",14),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.eventUpdatedEmit())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("eventInput",e.eventInfo)}}function fe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-event-bulk-upload",14),t.NdJ("eventUpdated",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.eventUpdatedEmit())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("eventInput",e.eventInfo)}}function he(o,s){1&o&&t._UZ(0,"app-access-denied")}let I=(()=>{class o{constructor(e,n,i,r,l){this.gs=e,this.es=n,this.router=i,this.modalService=r,this.sanitizer=l,this.isLoading=!0,this.unsubscribe$=new _.x,this.errors="",this.active=1,this.imgInfo={folderName:"events"},this.setActiveTab(this.router.url.split("/").pop())}ngOnInit(){this.getActions(),this.updateBreadcrumb(),this.getEventDetails()}updateBreadcrumb(){this.gs.globals.breadcrumb=[{name:"dashboard",url:"/"},{name:"Events",url:"/events"},{name:this.gs.globals.userInfo.currentEvent.name,url:"/events"}],this.gs.setGlobals(this.gs.globals)}getActions(){this.gs.globals.actions.canView=this.gs.userCanAction("events",0),this.gs.globals.actions.canAdd=this.gs.userCanAction("events",1),this.gs.globals.actions.canEdit=this.gs.userCanAction("events",2),this.gs.globals.actions.canDelete=this.gs.userCanAction("events",3)}getEventDetails(){this.isLoading=!0,this.eventId=this.gs.globals.userInfo.currentEvent.id,this.imgInfo.fileId=this.eventId,this.imgInfo.url=c.N.imgBaseUrl+this.imgInfo.folderName+"/"+this.imgInfo.fileId,this.es.getEventByEventId(this.eventId,this.gs.globals?.userInfo?.idToken?.payload["custom:utenantid"]).pipe((0,f.R)(this.unsubscribe$)).subscribe(e=>{this.mapLocation=this.sanitizer.bypassSecurityTrustResourceUrl(e?.data?.location),this.eventInfo=e?.data,this.isLoading=!1})}eventUpdatedEmit(){this.isLoading=!0,this.modalService.dismissAll(),this.getEventDetails()}setActiveTab(e){this.active="event-details"==e?1:"visitors-registration"==e?2:"forms"==e?3:"bulk-upload"==e?4:1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.U),t.Y36(C.n),t.Y36(x.F0),t.Y36(g.FF),t.Y36(U.H7))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-current-event"]],decls:23,vars:16,consts:[["class","progress mb-3",4,"ngIf"],[1,""],[1,"event-tabs"],["ngbNav","",1,"mt-3","nav-pills","nav-fill",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",1,"text-center",3,"routerLink"],["ngbNavContent","","class","m-0"],["ngbNavContent",""],[1,"ms-4",3,"ngbNavOutlet"],[4,"ngIf"],[1,"progress","mb-3"],["role","progressbar","aria-label","Animated striped example","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","100%"],[3,"eventInput","eventUpdated",4,"ngIf"],[3,"eventInput","eventUpdated"]],template:function(e,n){if(1&e&&(t.YNc(0,de,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3,4),t.NdJ("activeIdChange",function(r){return n.active=r}),t.ynx(5,5),t.TgZ(6,"a",6),t._uU(7,"Event Details"),t.qZA(),t.YNc(8,ue,1,1,"ng-template",7),t.BQk(),t.ynx(9,5),t.TgZ(10,"a",6),t._uU(11,"Visitors Registration"),t.qZA(),t.YNc(12,ge,1,1,"ng-template",8),t.BQk(),t.ynx(13,5),t.TgZ(14,"a",6),t._uU(15,"Forms"),t.qZA(),t.YNc(16,ve,1,1,"ng-template",8),t.BQk(),t.ynx(17,5),t.TgZ(18,"a",6),t._uU(19,"Bulk Upload"),t.qZA(),t.YNc(20,fe,1,1,"ng-template",8),t.BQk(),t.qZA(),t._UZ(21,"div",9),t.qZA()(),t.YNc(22,he,1,0,"app-access-denied",10)),2&e){const i=t.MAs(4);t.Q6J("ngIf",n.isLoading),t.xp6(1),t.ekj("loading-data",n.isLoading)("disabled",n.isLoading),t.xp6(2),t.Q6J("activeId",n.active),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(1),t.MGl("routerLink","/events/",n.eventId,""),t.xp6(3),t.Q6J("ngbNavItem",2),t.xp6(1),t.MGl("routerLink","/events/",n.eventId,"/visitors-registration"),t.xp6(3),t.Q6J("ngbNavItem",3),t.xp6(1),t.MGl("routerLink","/events/",n.eventId,"/forms"),t.xp6(3),t.Q6J("ngbNavItem",4),t.xp6(1),t.MGl("routerLink","/events/",n.eventId,"/bulk-upload"),t.xp6(3),t.Q6J("ngbNavOutlet",i),t.xp6(1),t.Q6J("ngIf",!n.gs.globals.actions.canView)}},dependencies:[u.O5,x.rH,Z.A,g.uN,g.Pz,g.nv,g.Vx,g.tO,g.Dy,Dt,Nt,Pt,ce]}),o})();const _e=[{path:"",component:q,children:[{path:"",component:B},{path:":id",component:I},{path:":id",component:I},{path:":id/visitors-registration",component:I},{path:":id/forms",component:I},{path:":id/settings",component:I},{path:":id/bulk-upload",component:I}]}];let be=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.Bz.forChild(_e),x.Bz]}),o})();var xe=p(8554);let Ce=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[u.uU],imports:[u.ez,be,xe.m]}),o})()}}]);